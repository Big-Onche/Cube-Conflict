// Game specific config stuff goes here

// Scoreboard Options
defvarp showscore     0 1 1
defvarp showkills     0 1 1
defvarp showdeaths    0 1 1
defvarp showlvl       0 1 1
defvarp showip        0 0 1
defvarp sbtransparent 0 1 1

// Settings
defvarp soundfreq_ui      0 2 3
defvarp soundbufferlen_ui 0 2 3
defvarp shadowslod	      0 2 3
defvarp lightlod		  0 2 3
defvarp trislod           0 2 3
defvarp decalslod	      0 2 3
defvarp aniso_ui		  0 2 3
defvarp msaa_ui			  0 2 3
defvarp fxaa_ui			  0 0 3

setshadowslod = [
	case $shadowslod 0 [
        csmfarplane = 512
        csmnearplane = 2
        smfilter = 0
        smdynshadow = 0
        smnoshadow = 1
        csmsplits = 1
        smsize = 8
	]
	case $shadowslod 1 [
        csmfarplane = 512
        csmnearplane = 4
        smfilter = 2
        smdynshadow = 0
        smnoshadow = 0
        csmsplits = 2
        smsize = 9
	]
	case $shadowslod 2 [
        csmfarplane = 1024
        csmnearplane = 8
        smfilter = 3
        smdynshadow = 1
        smnoshadow = 0
        csmsplits = 3
        smsize = 11
	]
	case $shadowslod 3 [	
        csmfarplane = 2048
        csmnearplane = 16
        smfilter = 3
        smdynshadow = 1
        smnoshadow = 0
        csmsplits = 4
        smsize = 13
	]
]

setlightlod = [
	case $lightlod 0 [
		dynlightdist = 256
        rhfarplane = 512
        volumetric = 0
        aocutoff = 4
	]
	case $lightlod 1 [
		dynlightdist = 512
        rhfarplane = 512
        volumetric = 1
        volsteps = 10;
        aocutoff = 8
	]
	case $lightlod 2 [
		dynlightdist = 1536
        rhfarplane = 1024
        volumetric = 1
        volsteps = 20
        aocutoff = 16
	]
	case $lightlod 3 [
		dynlightdist = 3072
        rhfarplane = 2048
        volumetric = 1
        volsteps = 40
        aocutoff = 32
	]
]

setwaterlod = [
	case $waterlod 0 [
        vertwater = 0
        caustics = 0
        waterreflect = 0
	]
	case $waterlod 1 [
        vertwater = 0
        caustics = 1
        waterreflect = 0
	]
	case $waterlod 2 [
        vertwater = 1
        caustics = 1
        waterreflect = 0
        waterlod = 2
        watersubdiv = 2
	]
	case $waterlod 3 [	
        vertwater = 1
        caustics = 1
        waterreflect = 1
        waterlod = 3
        watersubdiv = 3
	]
]

setparticleslod = [
	case $particleslod 0 [
        maxparticles = 512
        softparticles = 0
	]
	case $particleslod 1 [
        maxparticles = 2048
        softparticles = 1
	]
	case $particleslod 2 [
        maxparticles = 8192
        softparticles = 1
	]
	case $particleslod 3 [	
        maxparticles = 16384
        softparticles = 1
	]
]

set3Ddistlod = [
	case $trislod 0 [
        grassdist = 100
        grassstep = 4.0
		temptrisfade = 5000
		ragdollmillis = 2500
		maxmodelradiusdistance = 35
	]
	case $trislod 1 [
        grassdist = 75
        grassdist = 150
        grassstep = 3.5
		temptrisfade = 15000
		ragdollmillis = 7500
		maxmodelradiusdistance = 70
	]
	case $trislod 2 [
	    grassdist = 400
        grassstep = 2.5f
		temptrisfade = 30000
		ragdollmillis = 30000
		maxmodelradiusdistance = 100
	]
	case $trislod 3 [	
		grassdist = 750
        grassstep = 1.5f
		temptrisfade = 120000
		ragdollmillis = 60000
		maxmodelradiusdistance = 150
	]
]

setdecalslod = [
	case $decalslod 0 [
        maxstaintris = 512
        stainfade = 10000
	]
	case $decalslod 1 [
        maxstaintris = 2048
        stainfade = 20000
	]
	case $decalslod 2 [
        maxstaintris = 8192
        stainfade = 60000
	]
	case $decalslod 3 [	
        maxstaintris = 20480
        stainfade = 120000
	]
]


// Gamemodes selection
defvarp team_mode 0 0 1
defvarp game_mode 0 0 3
defvarp muta_mode 0 0 5
final_mode = 0

calcmode = [
	if (= $game_mode 3) [final_mode = -2][
		final_mode = 1
		if (= $team_mode 0) [
			final_mode = (+ $final_mode $muta_mode)
		][
			final_mode = (+ (+ $final_mode $muta_mode) 4)
			if (= $game_mode 1) [final_mode = (+ $final_mode 4)][if (= $game_mode 2) [final_mode = (+ $final_mode 8)]]
		]
	]
]

//Spectator
nextspecmode = [
   if $specmode [
      specmode (mod (+ $specmode 1) 3)
   ] [
      specmode (? (>= (getfollow) 0) 2 1)
   ]
]

defvarp zoomtoggle 0 0 1
dozoom = [if $zoomtoggle [zoom (? $zoom -1 1)] [zoom 1 ; onrelease [zoom -1]]]

defvarp dial -1 0 1
dodial = [if (! (uivisible "dial"))[dial 1 ; sleep 0 [dial 0]]]

drawdiagcmd = [if $GAME_LANG [helpmsg "Talk (^feE^f7)"][helpmsg "Discuter (^feE^f7)"]]

defvarp wieldtoggle 0 0 1
doautowield = [if $wieldtoggle [autowield (? $autowield -1 1)] [autowield 1 ; onrelease [autowield -1]]]

defvarp grenaded 0 1 1
dogrenade = [
	if $grenaded [
		getgrenade
		shoot
		grenaded 0
		sleep 999 [getoldweap ; grenaded 1]
	]
]

defvarp caced 0 1 1
docac = [
	if $caced [
		getcac
		shoot
		caced 0
		sleep 500 [getoldweap ; caced 1]
	]
]

sayteamcommand = [inputcommand $arg1 [sayteam $commandbuf] "[team]"]

mapcomplete = [complete $arg1 media/map ogz]
mapcomplete map

modenames = "edit rdm pdm rtdm ptdm rctf pctf"

loop i (listlen $modenames) [
   mname = (at $modenames $i)
   alias $mname [if (mode @i) [if (> $numargs 0) [map $arg1] [map]]]
   mapcomplete $mname
]

demo = [stopdemo; if (mode -1) [map $arg1]]
varcomplete demo demodir dmo

allowedittoggle = [result 1]

UI_menutabs = [5]
UI_menupausetabs = [0]

///////////////////////////////////////////////////////////////////////////////
//  Universal Mouse Scrollwheel                                              //
///////////////////////////////////////////////////////////////////////////////
ums_modifier    = 0
ums_setmodifier = [ums_modifier = $arg1; onrelease [ums_modifier = 0]]
ums_delta       = [[ums_delta_@(? $editing "edit" "game")_@ums_modifier] $arg1]
ums_delta_game_0 = [if $fullconsole [conskip (* $arg1 3)] [nextweapon $arg1]]
ums_delta_edit_0  = [if $fullconsole [conskip (* $arg1 3)] [if $blendpaintmode [nextblendbrush $arg1] [editfacewsel $arg1 1]]]  // Console scroll -or- Change blend brush -or- Push/pull geometry
ums_delta_edit_1  = [nodebug [gridpower (+ $arg1 $gridpower)]]                       // Grid size
ums_delta_edit_2  = [editfacewsel $arg1 0]                                           // Push face/corners selected
ums_delta_edit_3  = [editfacewsel $arg1 2]                                           // Push corner pointed at by cursor
ums_delta_edit_4  = [if $blendpaintmode [rotateblendbrush $arg1] [editrotate $arg1]] // Geometry rotate -or- blend brush rotate
ums_delta_edit_5  = [edittex $arg1]                                                  // Change textures
ums_delta_edit_6  = [selecthbrush $arg1]                                             // Change heightmap brush
ums_delta_edit_7  = [vdelta [voffset (* $arg1 $delta_multiplier2) 0]]               // vSlot: offset H
ums_delta_edit_8  = [vdelta [voffset 0 (* $arg1 $delta_multiplier2)]]               // vSlot: offset V
ums_delta_edit_9  = [vdelta [vrotate $arg1]]                                         // vSlot: rotate
ums_delta_edit_10 = [vdelta [vscale (if (< $arg1 0) 0.5 2)]]                         // vSlot: scale
ums_delta_edit_11 = [entproperty 0 (* $arg1 $delta_multiplier1)]
ums_delta_edit_12 = [entproperty 1 (* $arg1 $delta_multiplier1)]
ums_delta_edit_13 = [entproperty 2 (* $arg1 $delta_multiplier1)]
ums_delta_edit_14 = [entproperty 3 (* $arg1 $delta_multiplier1)]
ums_delta_edit_15 = [entproperty 4 (* $arg1 $delta_multiplier1)]
ums_delta_edit_16 = [entautoview $arg1]
delta_multiplier1 = 1
delta_multiplier2 = 16
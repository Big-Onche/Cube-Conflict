// standard menu definitions
// don't modify, add personal menus to autoexec.cfg instead

exec "config/ui/lib.cfg"           // UI library
exec "config/ui/style.cfg"         // Styles
exec "config/ui/scoreboard.cfg"    // Scoreboard
exec "config/ui/edithud.cfg"       // Edit HUD
exec "config/ui/fkey.cfg"          // F# Key Menus
exec "config/ui/serverbrowser.cfg" // Server Browser
exec "config/ui/stats.cfg"         // Player Stats
exec "config/ui/options.cfg"       // Options Menu

reui = [
   exec "config/ui.cfg"
]

togglemainmenu = [|| hidetopui [toggleui main]]

showlistmainmenu1 = [
    UIbutton "hold2" [uitext "Aptitudes" 0.65] 0.2 0.04 [hideui "main" ; showui "server_browser"]
	UIbutton "hold2" [uitext "Customisation" 0.65] 0.2 0.04 [hideui "main" ; showui "server_browser"]
	UIbutton "hold2" [uitext "Boutique" 0.65] 0.2 0.04 [hideui "main" ; showui "server_browser"]
	UIbutton "hold2" [uitext "Succes" 0.65] 0.2 0.04 [hideui "main" ; showui "server_browser"]
	UIbutton "hold2" [uitext "Statistiques" 0.65] 0.2 0.04 [hideui "main" ; showui "server_browser"]
    uifill 0.2 0.02 [UIbar 1]
    UIbutton "hold2" [uitext "Multijoueurs" 0.65] 0.2 0.04 [hideui "main" ; showui "server_browser"]
	if $mainmenu [
		UIbutton "hold2" [uitext "Campagne" 0.65] 0.2 0.04 [hideui "main" ; showui "server_browser"]
		UIbutton "hold2" [uitext "Jeu contre bots" 0.65] 0.2 0.04 [hideui "main" ; showui "server_browser"]
	]
    UIbutton "hold2" [uitext "Options"        0.65] 0.2 0.04 [hideui "main" ; showui "options"]
    UIbutton "hold2" [uitext "Quitter"        0.65] 0.2 0.04 [hideui "main" ; showui "options"]
    if $mainmenu [
       UIbutton "hold2" [uitext "Contributeurs"     0.65] 0.2 0.04 [hideui "main" ; showui "credits"]
    ]
    uifill 0.2 0.02 [UIbar 1]
	UIbutton "hold2" [uitext "Déconnexion" 0.65] 0.2 0.04 [hideui "main" ; showui "server_browser"]
    UIbutton "hold2" [uitext "Quitter"           0.65] 0.2 0.04 [quit]
]

showlistmainmenu0 = [
    UIbutton "hold2" [uitext "Aptitudes" 0.65] 0.2 0.04 [hideui "main" ; showui "server_browser"]
	UIbutton "hold2" [uitext "Customisation" 0.65] 0.2 0.04 [hideui "main" ; showui "server_browser"]
	UIbutton "hold2" [uitext "Boutique" 0.65] 0.2 0.04 [hideui "main" ; showui "server_browser"]
    uifill 0.2 0.02 [UIbar 1]
    UIbutton "hold2" [uitext "Multijoueurs" 0.65] 0.2 0.04 [hideui "main" ; showui "server_browser"]
    UIbutton "hold2" [uitext "Options"        0.65] 0.2 0.04 [hideui "main" ; showui "options"]
    UIbutton "hold2" [uitext "Quitter"        0.65] 0.2 0.04 [hideui "main" ; showui "options"]
    uifill 0.2 0.02 [UIbar 1]
	UIbutton "hold2" [uitext "Déconnexion" 0.65] 0.2 0.04 [hideui "main" ; showui "server_browser"]
    UIbutton "hold2" [uitext "Quitter"           0.65] 0.2 0.04 [quit]
]

bind ESCAPE [togglemainmenu]

///////////////////////////////////////////////////////////////////////////////
//  Main                                                                     //
///////////////////////////////////////////////////////////////////////////////
UImenu "main" [
   uieschide (! $mainmenu)
   hidechanges 1
   uihlist 0 [
      uivlist 0 [
		  UIvtab 0.2 (*f 0.048 5) UI_opttabs [
			 0 "Aptitudes"          []
			 1 "Customisation"          []
			 2 "Boutique"      []
			 3 "Succès"       []
			 4 "Statistiques"    []
		] 1
		uifill 0.2 0.02 [UIbar 1]
		UIvtab 0.2 (*f 0.048 5) UI_opttabs [
			 5 "Multijoueurs"         []
			 6 "Campagne"         []
			 7 "Options"         []
			 8 "Déconnexion"         []
			 9 "Quitter"         []
		  ] 1
	  ]
      uialign- 0 -1
      UIbar 0 1
      uifill 0.02
      uiscroll 0.67 0.6 [
         uifill 0.67 0.6 [
            uialign 0 -1
            uitable 0 0.005 [
               uialign -1 -1
               case $UI_opttabs 0 [//Aptitudes//////////////////////////////////////////////////////////
                  UI_optbar//----------------------------------------------------------------------
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext "FOV" 0.6]
                     uihlist 0 [
                        UIhslider fov 10 150 5 0.3 $UI_optrowh [uitext $fov 0.6]
                        uifield fov 3 [] 0.65 style_generic_focus
                     ]
                     uialign* -1 0
                  ]
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext "Sensitivity" 0.6]
                     uihlist 0 [
                        UIhslider sensitivity 0.1 40.0 0.1 0.3 $UI_optrowh [uitext $sensitivity 0.6]
                        uifield sensitivity 3 [] 0.65 style_generic_focus
                     ]
                     uialign* -1 0
                  ]
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext "Zoom FOV" 0.6]
                     uihlist 0 [
                        UIhslider zoomfov 10 90 1 0.3 $UI_optrowh [uitext $zoomfov 0.6]
                        uifield zoomfov 3 [] 0.65 style_generic_focus
                     ]
                     uialign* -1 0
                  ]
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext "Zoom Sensitivity" 0.6]
                     uihlist 0 [
                        UIhslider zoomsens 0.1 20.0 0.1 0.3 $UI_optrowh [uitext $zoomsens 0.6]
                        uifield zoomsens 3 [] 0.65 style_generic_focus
                     ]
                     uialign* -1 0
                  ]
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $zoomtoggle 0.016
                        uitext "Zoom Toggle" 0.6
                     ] $UI_optc1wB $UI_optrowh [zoomtoggle (! $zoomtoggle)] -1
                     uialign* -1 0
                  ]
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $invmouse 0.016
                        uitext "Invert Mouse" 0.6
                     ] $UI_optc1wB $UI_optrowh [invmouse (! $invmouse)] -1
                     uialign* -1 0
                  ]
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext "UI Sensitivity" 0.6]
                     uihlist 0 [
                        UIhslider uisensitivity 0.1 4.0 0.1 0.3 0.032 [uitext $uisensitivity 0.6]
                        uifield uisensitivity 3 [] 0.65 style_generic_focus
                     ]
                     uialign* -1 0
                  ]
                  UI_optbar//----------------------------------------------------------------------
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $showfps 0.016
                        uitext "Show FPS" 0.6
                     ] $UI_optc1wB $UI_optrowh [showfps (! $showfps)] -1
                     uialign* -1 0
                  ]
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $wallclock 0.016
                        uitext "Show Clock" 0.6
                     ] $UI_optc1wB $UI_optrowh [wallclock (! $wallclock)] -1
                     uialign* -1 0
                     uihlist 0 [
                        UIbutton "hold2" [
                           UIcheckbox $wallclock24 0.016
                           uitext (concatword (? (! $wallclock) "^f4") "24 Hour") 0.6
                        ] 0.178 $UI_optrowh [wallclock24 (! $wallclock24)] -1
                        UIbutton "hold2" [
                           UIcheckbox $wallclocksecs 0.016
                           uitext (concatword (? (! $wallclock) "^f4") "Seconds") 0.6
                        ] 0.178 $UI_optrowh [wallclocksecs (! $wallclocksecs)] -1
                     ]
                     uialign* -1 0
                  ]
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $hudgun 0.016
                        uitext "Show Weapon" 0.6
                     ] $UI_optc1wB $UI_optrowh [hudgun (! $hudgun)] -1
                     uialign* -1 0
                  ]
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $damagescreen 0.016
                        uitext "Bloody Screen" 0.6
                     ] $UI_optc1wB $UI_optrowh [damagescreen (! $damagescreen)] -1
                     uialign* -1 0
                  ]
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $blood 0.016
                        uitext "Blood" 0.6
                     ] $UI_optc1wB $UI_optrowh [blood (! $blood)] -1
                     uialign* -1 0
                  ]
                  UI_optbar//----------------------------------------------------------------------
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox (! $hidedead) 0.016
                        uitext "Show Dead Players" 0.6
                     ] $UI_optc1wB $UI_optrowh [hidedead (! $hidedead)] -1
                     UIhslider ragdollmillis 0 300000 5000 0.3 $UI_optrowh [uitext (concatword (? $hidedead "^f4") (div $ragdollmillis 1000)) 0.6]
                     uialign* -1 0
                  ]
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext (concatword (? $hidedead "^f4") "Ragdoll Velocity") 0.6]
                     UIhslider deadpush 1 20 1 0.3 $UI_optrowh [uitext (concatword (? $hidedead "^f4") $deadpush) 0.6]
                     uialign* -1 0
                  ]
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext "Fullbright Models" 0.6]
                     uihlist 0 [
                        UIlistslider fullbrightmodels = [0 "^f4off" 60 "^f1subtle" 100 "^f0bright" 150 "^f2overbright" 200 "^f3max"] 0.3 $UI_optrowh
                        uifield fullbrightmodels 3 [] 0.65 style_generic_focus
                     ]
                     uialign* -1 0
                  ]
                  UI_optbar//----------------------------------------------------------------------
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext "Radar" 0.6]
                     uihlist 0 [
                        UIbutton "hold2" [
                           UIcheckbox $radarteammates 0.016
                           uitext "Teammates" 0.6
                        ] 0.178 $UI_optrowh [radarteammates (! $radarteammates)] -1
                        UIbutton "hold2" [
                           UIcheckbox $showminimap 0.016
                           uitext "Mini-Map" 0.6
                        ] 0.178 $UI_optrowh [showminimap (! $showminimap)] -1
                     ]
                     uialign* -1 0
                  ]
                  UI_optbar//----------------------------------------------------------------------
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext "Scoreboard" 0.6]
                     uivlist 0 [
                        uihlist 0 [
                           UIbutton "hold2" [
                              UIcheckbox $showkills 0.016
                              uitext "Kills" 0.6
                           ] 0.178 $UI_optrowh [showkills (! $showkills)] -1
                           UIbutton "hold2" [
                              UIcheckbox $showdeaths 0.016
                              uitext "Deaths" 0.6
                           ] 0.178 $UI_optrowh [showdeaths (! $showdeaths)] -1
                        ]
                        uihlist 0 [
                           UIbutton "hold2" [
                              UIcheckbox $showscore 0.016
                              uitext "Score" 0.6
                           ] 0.178 $UI_optrowh [showscore (! $showscore)] -1
                           uifill 0.178
                        ]
                        uihlist 0 [
                           UIbutton "hold2" [
                              UIcheckbox $showping 0.016
                              uitext "Ping" 0.6
                           ] 0.178 $UI_optrowh [showping (! $showping)] -1
                           UIbutton "hold2" [
                              UIcheckbox $showclientnum 0.016
                              uitext "Client#" 0.6
                           ] 0.178 $UI_optrowh [showclientnum (! $showclientnum)] -1
                        ]
                        uihlist 0 [
                           UIbutton "hold2" [
                              UIcheckbox $showip 0.016
                              uitext "IP:Port" 0.6
                           ] 0.178 $UI_optrowh [showip (! $showip)] -1
                           UIbutton "hold2" [
                              UIcheckbox $showspectators 0.016
                              uitext "Spectators" 0.6
                           ] 0.178 $UI_optrowh [showspectators (! $showspectators)] -1
                        ]
                        uihlist 0 [
                           UIbutton "hold2" [
                              UIcheckbox $sbtransparent 0.016
                              uitext "Transparent" 0.6
                           ] 0.178 $UI_optrowh [sbtransparent (! $sbtransparent)] -1
                           uifill 0.178
                        ]
                        uialign* -1 -1
                     ]
                     uialign* -1 0
                  ]
                  UI_optbar//----------------------------------------------------------------------
               ] 1 [//Edit/////////////////////////////////////////////////////////////////////////
                  UI_optbar//----------------------------------------------------------------------
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext "Shift Floatspeed" 0.6]
                     uihlist 0 [
                        UIhslider editfloatspeed 10 10000 10 0.3 $UI_optrowh [uitext $editfloatspeed 0.6]
                        uifield editfloatspeed 4 [] 0.65 style_generic_focus
                     ]
                     uialign* -1 0
                  ]
                  UI_optbar//----------------------------------------------------------------------
               ] 2 [//Graphics/////////////////////////////////////////////////////////////////////
                  UI_optbar//----------------------------------------------------------------------
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext "Shadow Resolution" 0.6]
                     UIlistslider smsize = [11 "^f1low" 12 "^f0medium" 13 "^f2high"] 0.3 $UI_optrowh
                     uialign* -1 0
                  ]
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext "Shadow Filtering" 0.6]
                     UIlistslider smfilter = [0 "^f1low" 1 "^f0medium" 2 "^f2high" 3 "^f3ultra"] 0.3 $UI_optrowh
                     uialign* -1 0
                  ]
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $gi 0.016
                        uitext "Global Illumination" 0.6
                     ] $UI_optc1wB $UI_optrowh [gi (! $gi)] -1
                     UIlistslider rhtaps = [
                        12 @(concatword (? (! $gi) "^f4" "^f1") "low")
                        20 @(concatword (? (! $gi) "^f4" "^f0") "medium")
                        32 @(concatword (? (! $gi) "^f4" "^f2") "high")
                     ] 0.3 $UI_optrowh
                     uialign* -1 0
                  ]
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $ao 0.016
                        uitext "SSAO" 0.6
                     ] $UI_optc1wB $UI_optrowh [ao (! $ao)] -1
                     UIlistslider aotaps = [
                        5  @(concatword (? (! $ao) "^f4" "^f1") "low")
                        8  @(concatword (? (! $ao) "^f4" "^f0") "medium")
                        12 @(concatword (? (! $ao) "^f4" "^f2") "high")
                     ] 0.3 $UI_optrowh [aobilateral (? (>= $aotaps 8) 4 3)]
                     uialign* -1 0
                  ]
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $volumetric 0.016
                        uitext "Volumetric Lighting" 0.6
                     ] $UI_optc1wB $UI_optrowh [volumetric (! $volumetric)] -1
                     UIlistslider volsteps = [
                        12 @(concatword (? (! $volumetric) "^f4" "^f1") "low")
                        16 @(concatword (? (! $volumetric) "^f4" "^f0") "medium")
                        24 @(concatword (? (! $volumetric) "^f4" "^f2") "high")
                     ] 0.3 $UI_optrowh [
                        volbilateral (? (>= $volsteps 16) 2 1)
                     ]
                     uialign* -1 0
                  ]
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext "Water" 0.6]
                     uivlist 0 [
                        uihlist 0 [
                           UIbutton "hold2" [
                              UIcheckbox $waterreflect 0.016
                              uitext "reflection" 0.6
                           ] 0.178 $UI_optrowh [waterreflect (! $waterreflect)] -1
                           UIbutton "hold2" [
                              UIcheckbox $caustics 0.016
                              uitext "caustics" 0.6
                           ] 0.178 $UI_optrowh [caustics (! $caustics)] -1
                        ]
                        UIbutton "hold2" [
                           UIcheckbox $vertwater 0.016
                           uitext "animation" 0.6
                        ] 0.178 $UI_optrowh [vertwater (! $vertwater)] -1
                        uialign* -1 -1
                     ]
                     uialign* -1 0
                  ]
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $softparticles 0.016
                        uitext "Soft Particles" 0.6
                     ] $UI_optc1wB $UI_optrowh [softparticles (! $softparticles)] -1
                     uialign* -1 0
                  ]
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $stains 0.016
                        uitext "Stains" 0.6
                     ] $UI_optc1wB $UI_optrowh [stains (! $stains)] -1
                     uihlist 0 [
                        UIlistslider stainfade = [
                           2 @(concatword (? (! $stains) "^f4" "^f1") "instant-fade")
                           15 @(concatword (? (! $stains) "^f4" "^f0") "quick-fade")
                           30 @(concatword (? (! $stains) "^f4" "^f2") "moderate-fade")
                           60 @(concatword (? (! $stains) "^f4" "^f3") "slow-fade")
                        ] 0.3 $UI_optrowh [
                           maxstaintris (? (> $stainfade 15) 8192 2048)
                        ]
                        uifield stainfade 4 [
                           maxstaintris (? (> $stainfade 15) 8192 2048)
                        ] 0.65 style_generic_focus
                     ]
                     uialign* -1 0
                  ]
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $grass 0.016
                        uitext "3D Grass" 0.6
                     ] $UI_optc1wB $UI_optrowh [grass (! $grass)] -1
                     uihlist 0 [
                        UIlistslider grassdist = [
                           128 @(concatword (? (! $grass) "^f4" "^f1") "quick-fade")
                           256 @(concatword (? (! $grass) "^f4" "^f0") "moderate-fade")
                           512 @(concatword (? (! $grass) "^f4" "^f2") "slow-fade")
                           1024 @(concatword (? (! $grass) "^f4" "^f3") "slower-fade")
                        ] 0.3 $UI_optrowh
                        uifield grassdist 4 [] 0.65 style_generic_focus
                     ]
                     uialign* -1 0
                  ]
                  UI_optbar//----------------------------------------------------------------------
               ] 3 [//Display//////////////////////////////////////////////////////////////////////
                  UI_optbar//----------------------------------------------------------------------
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext "Anisotropic Filtering" 0.6]
                     UIlistslider aniso = [0 "^f4off" 2 "^f12x" 4 "^f04x" 8 "^f28x" 16 "^f316x"] 0.3 $UI_optrowh
                     uialign* -1 0
                  ]
                  UI_optbar//----------------------------------------------------------------------
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $smaa 0.016
                        uitext "Morphological AA" 0.6
                     ] $UI_optc1wB $UI_optrowh [smaa (! $smaa)] -1
                     UIlistslider smaaquality = [
                        0 @(concatword (? (! $smaa) "^f4" "^f1") "low")
                        1 @(concatword (? (! $smaa) "^f4" "^f0") "medium")
                        2 @(concatword (? (! $smaa) "^f4" "^f2") "high")
                        3 @(concatword (? (! $smaa) "^f4" "^f3") "ultra")
                     ] 0.3 $UI_optrowh [smaacoloredge (>= $smaaquality 3)]
                     uialign* -1 0
                  ]
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $tqaa 0.016
                        uitext "Temporal AA" 0.6
                     ] $UI_optc1wB $UI_optrowh [tqaa (! $tqaa)] -1
                     uialign* -1 0
                  ]
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $fxaa 0.016
                        uitext "FXAA" 0.6
                     ] $UI_optc1wB $UI_optrowh [fxaa (! $fxaa)] -1
                     UIlistslider fxaaquality = [
                        0 @(concatword (? (! $fxaa) "^f4" "^f1") "low")
                        1 @(concatword (? (! $fxaa) "^f4" "^f0") "medium")
                        2 @(concatword (? (! $fxaa) "^f4" "^f2") "high")
                        3 @(concatword (? (! $fxaa) "^f4" "^f3") "ultra")
                     ] 0.3 $UI_optrowh
                     uialign* -1 0
                  ]
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext "Multisample AA" 0.6]
                     UIlistslider msaa = [0 "^f4off" 2 "^f12x" 4 "^f04x" 8 "^f28x" 16 "^f316x"] 0.3 $UI_optrowh
                     uialign* -1 0
                  ]
                  UI_optbar//----------------------------------------------------------------------
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext "Gamma" 0.6]
                     uihlist 0 [
                        UIhslider gamma 30 300 5 0.3 $UI_optrowh [uitext $gamma 0.6]
                        uifield gamma 3 [] 0.65 style_generic_focus
                     ]
                     uialign* -1 0
                  ]
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $vsync 0.016
                        uitext "V-sync" 0.6
                     ] $UI_optc1wB $UI_optrowh [vsync (! $vsync)] -1
                     UIbutton "hold2" [
                        UIcheckbox $vsynctear 0.016
                        uitext (concatword (? (! $vsync) "^f4") "Tear")  0.6
                     ] 0.15 $UI_optrowh [vsynctear (! $vsynctear)] -1
                     uialign* -1 0
                  ]
                  UI_optbar//----------------------------------------------------------------------
               ] 4 [//Resolution///////////////////////////////////////////////////////////////////
                  UI_optbar//----------------------------------------------------------------------
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext "Aspect Ratio" 0.6]
                     UIlistslider UI_aspectratio =s $opt_ratios_assoc 0.3 $UI_optrowh [
                        if (=s $UI_aspectratio "custom") [] [
                           UI_resolution = (at $[UI_ratio@UI_aspectratio] 1)
                           screenw (at $UI_resolution 0)
                           screenh (at $UI_resolution 1)
                        ]
                     ]
                     uialign* -1 0
                  ]
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox (!=s $UI_aspectratio "custom") 0.016
                        uitext "Preset Resolution" 0.6
                     ] $UI_optc1wB $UI_optrowh [
                        if (=s $UI_aspectratio "custom") [
                           UI_findratio
                           if (=s $UI_aspectratio "custom") [
                              UI_aspectratio = "16:10"
                              UI_resolution = (at $[UI_ratio@UI_aspectratio] 1)
                              screenw (at $UI_resolution 0)
                              screenh (at $UI_resolution 1)
                           ]
                        ] [
                           UI_aspectratio = "custom"
                        ]
                     ] -1
                     if (=s $UI_aspectratio "custom") [
                        uihlist 0.009 [
                           uifield screenw 5 [] 0.65 style_generic_focus
                           uitext "x" 0.6
                           uifield screenh 5 [] 0.65 style_generic_focus
                           UIbutton "" [uitext "Native" 0.6] 0.1 $UI_optrowh [
                              UI_resolution = (concat $desktopw $desktoph)
                              UI_findratio
                              screenw (at $UI_resolution 0)
                              screenh (at $UI_resolution 1)
                           ]
                        ]
                     ] [
                        UIlistslider UI_resolution = (
                           looplistconcat i $[UI_ratio@UI_aspectratio] [
                              result (concat (escape $i) (strreplace $i " " "x"))
                           ]
                        ) 0.3 $UI_optrowh [
                            screenw (at $UI_resolution 0)
                            screenh (at $UI_resolution 1)
                        ]
                     ]
                     uialign* -1 0
                  ]
                  UI_optbar//----------------------------------------------------------------------
               ] 5 [//Multijoueurs////////////////////////////////////////////////////////////////////////
			   uihlist 0 [
refreshservers
   uivlist 0.01 [
      uihlist 0 [
         uiclamp 1 1
         UIbutton "" [uitext "Rafraîchir la liste" 0.6] 0.2 0.032 [updatefrommaster] 0 [uialign -1 0]
         uihlist 0 [
            UIbutton "" [
               UIcheckbox $searchlan 0.016
               uitext "Jeu en LAN" 0.6
            ] 0.18 0.032 [searchlan (! $searchlan)] -1
            UIbutton "" [
               UIcheckbox $autoupdateservers 0.016
               uitext "Mise à jour auto." 0.6
            ] 0.18 0.032 [autoupdateservers (! $autoupdateservers)] -1
            UIbutton "" [
               UIcheckbox $autosortservers 0.016
               uitext "Tri automatique" 0.6
            ] 0.18 0.032 [
               _sb_sort = (! $_sb_sort)
               autosortservers $_sb_sort
            ] -1
         ]
         UIbutton "" [
            UItriangle 0xCCCCCC 0.01 0.01 270
            uitext "Filtres" 0.6
         ] 0.2 0.032 [showui "sb_filters"] 0 [uialign 1 0]
      ]
      uihlist 0.01 [
         uialign 1 0
         uiscroll 1.1 0.65 [
            uitarget 1.07 0.65 [
               if $_sb_sort [autosortservers (! (uihover?))]
               uivlist 0.0035 [
                  uialign 0 -1
                  uiclamp 1 1
                  loop i $numservers [
                     if (servinfovalid $i) [
                        if (&& [
                           <= (servinfoping $i) $_sb_ping
                        ] [
                           ! (& (<< 1 (servinfomastermode $i)) $_sb_mm)
                        ] [
                           ! (& (<< 1 (servinfomode $i)) $_sb_mode)
                        ] [
                           != (servinfonumplayers $i) (* $_sb_players (servinfomaxplayers $i))
                        ]) [
                           _servers_map = (servinfomap $i)
                           UIbuttonarea "" 0 0.065 [
                              uirelease [connectservinfo $i]
                              uispace 0.01 0 [
                                 uiclamp 1 1
                                 uihlist 0.01 [
                                    uialign -1
                                    uifill 0.09 0 [
                                       uivlist 0.002 [
                                          uihlist 0.006 [
                                             uitext (servinfonumplayers $i) 0.8
                                             uitext "/" 0.6
                                             uitext (servinfomaxplayers $i) 0.6
                                          ]
                                          uihlist 0.006 [
                                             uitext (servinfoping $i) 0.6
                                             uitext "ms" 0.55
                                          ]
                                       ]
                                    ]
                                    uiimage "media/interface/cube.png" 0.06 0.06 [
                                       uiimage (concatword "media/map/" $_servers_map ".png") 0.06 0.06
                                    ]
                                    uifill 0.68 0 [
                                       uiclip 0.68 0 [
                                          uialign -1
                                          uivlist 0.002 [
                                             uispace 0.01 0 [uitext (servinfodesc $i) 0.65]
                                             uialign- -1
                                             uihlist 0.015 [
                                                uialign -1
                                                uifill 0.012
                                                uihlist 0.005 [
                                                   uitext "^fs[" 0.6
                                                   uitext (servinfomastermodename $i) 0.6
                                                   uitext "^fS]" 0.6
                                                ]
                                                UItriangle 0x404040 0.01 0.01 270
                                                uitext (servinfomodename $i) 0.6
                                                if (!=s $_servers_map "") [
                                                   UItriangle 0x404040 0.01 0.01 270
                                                   uitext $_servers_map 0.6
                                                ]
                                                if (m_timed (servinfomode $i)) [
                                                   UItriangle 0x404040 0.01 0.01 270
                                                   uitext (concatword "^f8" (servinfotime $i)) 0.6
                                                ]
                                             ]
                                          ]
                                       ]
                                       UIbar 0 1 ; uialign- 1
                                    ]
                                 ]
                                 uihlist 0.005 [
                                    uialign 1
                                    uivlist 0.004 [
                                       uicolortext (servinfoname $i) 0x808080 0.55
                                       uicolortext (servinfoport $i) 0x808080 0.55
                                       uialign* 1
                                    ]
                                    if (&& [=s $connectedip (servinfoname $i)] [= $connectedport (servinfoport $i)]) [
                                       UItriangle 0xCCCCCC 0.04 0.015 90
                                    ] [uifill 0.015 0]
                                 ]
                              ]
                           ]
                        ]
                     ] [
                        if $_sb_showwait [
                           // could offer customised messages one day
                           UIbutton "" [uitext (servinfodesc $i) 0.6] 0 0.065
                        ]
                     ]
                  ]
                  uiclamp* 1 1
               ]
            ]
         ]
         UIvscroll 0.02 0.65 1.3
      ]
   ]
   ] [initservers] [] [] "Server Browser"
   
   
   
   
   
   
   
   
   
   ] 7 [//Options////////////////////////////////////////////////////////////////////////
   hidechanges 1
   uihlist 0 [
      UIvtab 0.2 (*f 0.048 6) UI_opttabs [
         0 "Game"          []
         1 "Edit"          []
         2 "Graphics"      []
         3 "Display"       []
         4 "Resolution"    []
         5 "Audio"         []
         //* "Console"       []
      ] 1
      uialign- 0 -1
      UIbar 0 1
      uifill 0.02
      uiscroll 0.67 0.6 [
         uifill 0.67 0.6 [
            uialign 0 -1
            uitable 0 0.005 [
               uialign -1 -1
               case $UI_opttabs 0 [//Game//////////////////////////////////////////////////////////
                  UI_optbar//----------------------------------------------------------------------
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext "FOV" 0.6]
                     uihlist 0 [
                        UIhslider fov 10 150 5 0.3 $UI_optrowh [uitext $fov 0.6]
                        uifield fov 3 [] 0.65 style_generic_focus
                     ]
                     uialign* -1 0
                  ]
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext "Sensitivity" 0.6]
                     uihlist 0 [
                        UIhslider sensitivity 0.1 40.0 0.1 0.3 $UI_optrowh [uitext $sensitivity 0.6]
                        uifield sensitivity 3 [] 0.65 style_generic_focus
                     ]
                     uialign* -1 0
                  ]
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext "Zoom FOV" 0.6]
                     uihlist 0 [
                        UIhslider zoomfov 10 90 1 0.3 $UI_optrowh [uitext $zoomfov 0.6]
                        uifield zoomfov 3 [] 0.65 style_generic_focus
                     ]
                     uialign* -1 0
                  ]
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext "Zoom Sensitivity" 0.6]
                     uihlist 0 [
                        UIhslider zoomsens 0.1 20.0 0.1 0.3 $UI_optrowh [uitext $zoomsens 0.6]
                        uifield zoomsens 3 [] 0.65 style_generic_focus
                     ]
                     uialign* -1 0
                  ]
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $zoomtoggle 0.016
                        uitext "Zoom Toggle" 0.6
                     ] $UI_optc1wB $UI_optrowh [zoomtoggle (! $zoomtoggle)] -1
                     uialign* -1 0
                  ]
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $invmouse 0.016
                        uitext "Invert Mouse" 0.6
                     ] $UI_optc1wB $UI_optrowh [invmouse (! $invmouse)] -1
                     uialign* -1 0
                  ]
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext "UI Sensitivity" 0.6]
                     uihlist 0 [
                        UIhslider uisensitivity 0.1 4.0 0.1 0.3 0.032 [uitext $uisensitivity 0.6]
                        uifield uisensitivity 3 [] 0.65 style_generic_focus
                     ]
                     uialign* -1 0
                  ]
                  UI_optbar//----------------------------------------------------------------------
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $showfps 0.016
                        uitext "Show FPS" 0.6
                     ] $UI_optc1wB $UI_optrowh [showfps (! $showfps)] -1
                     uialign* -1 0
                  ]
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $wallclock 0.016
                        uitext "Show Clock" 0.6
                     ] $UI_optc1wB $UI_optrowh [wallclock (! $wallclock)] -1
                     uialign* -1 0
                     uihlist 0 [
                        UIbutton "hold2" [
                           UIcheckbox $wallclock24 0.016
                           uitext (concatword (? (! $wallclock) "^f4") "24 Hour") 0.6
                        ] 0.178 $UI_optrowh [wallclock24 (! $wallclock24)] -1
                        UIbutton "hold2" [
                           UIcheckbox $wallclocksecs 0.016
                           uitext (concatword (? (! $wallclock) "^f4") "Seconds") 0.6
                        ] 0.178 $UI_optrowh [wallclocksecs (! $wallclocksecs)] -1
                     ]
                     uialign* -1 0
                  ]
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $hudgun 0.016
                        uitext "Show Weapon" 0.6
                     ] $UI_optc1wB $UI_optrowh [hudgun (! $hudgun)] -1
                     uialign* -1 0
                  ]
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $damagescreen 0.016
                        uitext "Bloody Screen" 0.6
                     ] $UI_optc1wB $UI_optrowh [damagescreen (! $damagescreen)] -1
                     uialign* -1 0
                  ]
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $blood 0.016
                        uitext "Blood" 0.6
                     ] $UI_optc1wB $UI_optrowh [blood (! $blood)] -1
                     uialign* -1 0
                  ]
                  UI_optbar//----------------------------------------------------------------------
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox (! $hidedead) 0.016
                        uitext "Show Dead Players" 0.6
                     ] $UI_optc1wB $UI_optrowh [hidedead (! $hidedead)] -1
                     UIhslider ragdollmillis 0 300000 5000 0.3 $UI_optrowh [uitext (concatword (? $hidedead "^f4") (div $ragdollmillis 1000)) 0.6]
                     uialign* -1 0
                  ]
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext (concatword (? $hidedead "^f4") "Ragdoll Velocity") 0.6]
                     UIhslider deadpush 1 20 1 0.3 $UI_optrowh [uitext (concatword (? $hidedead "^f4") $deadpush) 0.6]
                     uialign* -1 0
                  ]
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext "Fullbright Models" 0.6]
                     uihlist 0 [
                        UIlistslider fullbrightmodels = [0 "^f4off" 60 "^f1subtle" 100 "^f0bright" 150 "^f2overbright" 200 "^f3max"] 0.3 $UI_optrowh
                        uifield fullbrightmodels 3 [] 0.65 style_generic_focus
                     ]
                     uialign* -1 0
                  ]
                  UI_optbar//----------------------------------------------------------------------
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext "Radar" 0.6]
                     uihlist 0 [
                        UIbutton "hold2" [
                           UIcheckbox $radarteammates 0.016
                           uitext "Teammates" 0.6
                        ] 0.178 $UI_optrowh [radarteammates (! $radarteammates)] -1
                        UIbutton "hold2" [
                           UIcheckbox $showminimap 0.016
                           uitext "Mini-Map" 0.6
                        ] 0.178 $UI_optrowh [showminimap (! $showminimap)] -1
                     ]
                     uialign* -1 0
                  ]
                  UI_optbar//----------------------------------------------------------------------
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext "Scoreboard" 0.6]
                     uivlist 0 [
                        uihlist 0 [
                           UIbutton "hold2" [
                              UIcheckbox $showkills 0.016
                              uitext "Kills" 0.6
                           ] 0.178 $UI_optrowh [showkills (! $showkills)] -1
                           UIbutton "hold2" [
                              UIcheckbox $showdeaths 0.016
                              uitext "Deaths" 0.6
                           ] 0.178 $UI_optrowh [showdeaths (! $showdeaths)] -1
                        ]
                        uihlist 0 [
                           UIbutton "hold2" [
                              UIcheckbox $showscore 0.016
                              uitext "Score" 0.6
                           ] 0.178 $UI_optrowh [showscore (! $showscore)] -1
                           uifill 0.178
                        ]
                        uihlist 0 [
                           UIbutton "hold2" [
                              UIcheckbox $showping 0.016
                              uitext "Ping" 0.6
                           ] 0.178 $UI_optrowh [showping (! $showping)] -1
                           UIbutton "hold2" [
                              UIcheckbox $showclientnum 0.016
                              uitext "Client#" 0.6
                           ] 0.178 $UI_optrowh [showclientnum (! $showclientnum)] -1
                        ]
                        uihlist 0 [
                           UIbutton "hold2" [
                              UIcheckbox $showip 0.016
                              uitext "IP:Port" 0.6
                           ] 0.178 $UI_optrowh [showip (! $showip)] -1
                           UIbutton "hold2" [
                              UIcheckbox $showspectators 0.016
                              uitext "Spectators" 0.6
                           ] 0.178 $UI_optrowh [showspectators (! $showspectators)] -1
                        ]
                        uihlist 0 [
                           UIbutton "hold2" [
                              UIcheckbox $sbtransparent 0.016
                              uitext "Transparent" 0.6
                           ] 0.178 $UI_optrowh [sbtransparent (! $sbtransparent)] -1
                           uifill 0.178
                        ]
                        uialign* -1 -1
                     ]
                     uialign* -1 0
                  ]
                  UI_optbar//----------------------------------------------------------------------
               ] 1 [//Edit/////////////////////////////////////////////////////////////////////////
                  UI_optbar//----------------------------------------------------------------------
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext "Shift Floatspeed" 0.6]
                     uihlist 0 [
                        UIhslider editfloatspeed 10 10000 10 0.3 $UI_optrowh [uitext $editfloatspeed 0.6]
                        uifield editfloatspeed 4 [] 0.65 style_generic_focus
                     ]
                     uialign* -1 0
                  ]
                  UI_optbar//----------------------------------------------------------------------
               ] 2 [//Graphics/////////////////////////////////////////////////////////////////////
                  UI_optbar//----------------------------------------------------------------------
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext "Shadow Resolution" 0.6]
                     UIlistslider smsize = [11 "^f1low" 12 "^f0medium" 13 "^f2high"] 0.3 $UI_optrowh
                     uialign* -1 0
                  ]
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext "Shadow Filtering" 0.6]
                     UIlistslider smfilter = [0 "^f1low" 1 "^f0medium" 2 "^f2high" 3 "^f3ultra"] 0.3 $UI_optrowh
                     uialign* -1 0
                  ]
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $gi 0.016
                        uitext "Global Illumination" 0.6
                     ] $UI_optc1wB $UI_optrowh [gi (! $gi)] -1
                     UIlistslider rhtaps = [
                        12 @(concatword (? (! $gi) "^f4" "^f1") "low")
                        20 @(concatword (? (! $gi) "^f4" "^f0") "medium")
                        32 @(concatword (? (! $gi) "^f4" "^f2") "high")
                     ] 0.3 $UI_optrowh
                     uialign* -1 0
                  ]
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $ao 0.016
                        uitext "SSAO" 0.6
                     ] $UI_optc1wB $UI_optrowh [ao (! $ao)] -1
                     UIlistslider aotaps = [
                        5  @(concatword (? (! $ao) "^f4" "^f1") "low")
                        8  @(concatword (? (! $ao) "^f4" "^f0") "medium")
                        12 @(concatword (? (! $ao) "^f4" "^f2") "high")
                     ] 0.3 $UI_optrowh [aobilateral (? (>= $aotaps 8) 4 3)]
                     uialign* -1 0
                  ]
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $volumetric 0.016
                        uitext "Volumetric Lighting" 0.6
                     ] $UI_optc1wB $UI_optrowh [volumetric (! $volumetric)] -1
                     UIlistslider volsteps = [
                        12 @(concatword (? (! $volumetric) "^f4" "^f1") "low")
                        16 @(concatword (? (! $volumetric) "^f4" "^f0") "medium")
                        24 @(concatword (? (! $volumetric) "^f4" "^f2") "high")
                     ] 0.3 $UI_optrowh [
                        volbilateral (? (>= $volsteps 16) 2 1)
                     ]
                     uialign* -1 0
                  ]
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext "Water" 0.6]
                     uivlist 0 [
                        uihlist 0 [
                           UIbutton "hold2" [
                              UIcheckbox $waterreflect 0.016
                              uitext "reflection" 0.6
                           ] 0.178 $UI_optrowh [waterreflect (! $waterreflect)] -1
                           UIbutton "hold2" [
                              UIcheckbox $caustics 0.016
                              uitext "caustics" 0.6
                           ] 0.178 $UI_optrowh [caustics (! $caustics)] -1
                        ]
                        UIbutton "hold2" [
                           UIcheckbox $vertwater 0.016
                           uitext "animation" 0.6
                        ] 0.178 $UI_optrowh [vertwater (! $vertwater)] -1
                        uialign* -1 -1
                     ]
                     uialign* -1 0
                  ]
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $softparticles 0.016
                        uitext "Soft Particles" 0.6
                     ] $UI_optc1wB $UI_optrowh [softparticles (! $softparticles)] -1
                     uialign* -1 0
                  ]
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $stains 0.016
                        uitext "Stains" 0.6
                     ] $UI_optc1wB $UI_optrowh [stains (! $stains)] -1
                     uihlist 0 [
                        UIlistslider stainfade = [
                           2 @(concatword (? (! $stains) "^f4" "^f1") "instant-fade")
                           15 @(concatword (? (! $stains) "^f4" "^f0") "quick-fade")
                           30 @(concatword (? (! $stains) "^f4" "^f2") "moderate-fade")
                           60 @(concatword (? (! $stains) "^f4" "^f3") "slow-fade")
                        ] 0.3 $UI_optrowh [
                           maxstaintris (? (> $stainfade 15) 8192 2048)
                        ]
                        uifield stainfade 4 [
                           maxstaintris (? (> $stainfade 15) 8192 2048)
                        ] 0.65 style_generic_focus
                     ]
                     uialign* -1 0
                  ]
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $grass 0.016
                        uitext "3D Grass" 0.6
                     ] $UI_optc1wB $UI_optrowh [grass (! $grass)] -1
                     uihlist 0 [
                        UIlistslider grassdist = [
                           128 @(concatword (? (! $grass) "^f4" "^f1") "quick-fade")
                           256 @(concatword (? (! $grass) "^f4" "^f0") "moderate-fade")
                           512 @(concatword (? (! $grass) "^f4" "^f2") "slow-fade")
                           1024 @(concatword (? (! $grass) "^f4" "^f3") "slower-fade")
                        ] 0.3 $UI_optrowh
                        uifield grassdist 4 [] 0.65 style_generic_focus
                     ]
                     uialign* -1 0
                  ]
                  UI_optbar//----------------------------------------------------------------------
               ] 3 [//Display//////////////////////////////////////////////////////////////////////
                  UI_optbar//----------------------------------------------------------------------
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext "Anisotropic Filtering" 0.6]
                     UIlistslider aniso = [0 "^f4off" 2 "^f12x" 4 "^f04x" 8 "^f28x" 16 "^f316x"] 0.3 $UI_optrowh
                     uialign* -1 0
                  ]
                  UI_optbar//----------------------------------------------------------------------
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $smaa 0.016
                        uitext "Morphological AA" 0.6
                     ] $UI_optc1wB $UI_optrowh [smaa (! $smaa)] -1
                     UIlistslider smaaquality = [
                        0 @(concatword (? (! $smaa) "^f4" "^f1") "low")
                        1 @(concatword (? (! $smaa) "^f4" "^f0") "medium")
                        2 @(concatword (? (! $smaa) "^f4" "^f2") "high")
                        3 @(concatword (? (! $smaa) "^f4" "^f3") "ultra")
                     ] 0.3 $UI_optrowh [smaacoloredge (>= $smaaquality 3)]
                     uialign* -1 0
                  ]
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $tqaa 0.016
                        uitext "Temporal AA" 0.6
                     ] $UI_optc1wB $UI_optrowh [tqaa (! $tqaa)] -1
                     uialign* -1 0
                  ]
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $fxaa 0.016
                        uitext "FXAA" 0.6
                     ] $UI_optc1wB $UI_optrowh [fxaa (! $fxaa)] -1
                     UIlistslider fxaaquality = [
                        0 @(concatword (? (! $fxaa) "^f4" "^f1") "low")
                        1 @(concatword (? (! $fxaa) "^f4" "^f0") "medium")
                        2 @(concatword (? (! $fxaa) "^f4" "^f2") "high")
                        3 @(concatword (? (! $fxaa) "^f4" "^f3") "ultra")
                     ] 0.3 $UI_optrowh
                     uialign* -1 0
                  ]
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext "Multisample AA" 0.6]
                     UIlistslider msaa = [0 "^f4off" 2 "^f12x" 4 "^f04x" 8 "^f28x" 16 "^f316x"] 0.3 $UI_optrowh
                     uialign* -1 0
                  ]
                  UI_optbar//----------------------------------------------------------------------
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext "Gamma" 0.6]
                     uihlist 0 [
                        UIhslider gamma 30 300 5 0.3 $UI_optrowh [uitext $gamma 0.6]
                        uifield gamma 3 [] 0.65 style_generic_focus
                     ]
                     uialign* -1 0
                  ]
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $vsync 0.016
                        uitext "V-sync" 0.6
                     ] $UI_optc1wB $UI_optrowh [vsync (! $vsync)] -1
                     UIbutton "hold2" [
                        UIcheckbox $vsynctear 0.016
                        uitext (concatword (? (! $vsync) "^f4") "Tear")  0.6
                     ] 0.15 $UI_optrowh [vsynctear (! $vsynctear)] -1
                     uialign* -1 0
                  ]
                  UI_optbar//----------------------------------------------------------------------
               ] 4 [//Resolution///////////////////////////////////////////////////////////////////
                  UI_optbar//----------------------------------------------------------------------
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext "Aspect Ratio" 0.6]
                     UIlistslider UI_aspectratio =s $opt_ratios_assoc 0.3 $UI_optrowh [
                        if (=s $UI_aspectratio "custom") [] [
                           UI_resolution = (at $[UI_ratio@UI_aspectratio] 1)
                           screenw (at $UI_resolution 0)
                           screenh (at $UI_resolution 1)
                        ]
                     ]
                     uialign* -1 0
                  ]
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox (!=s $UI_aspectratio "custom") 0.016
                        uitext "Preset Resolution" 0.6
                     ] $UI_optc1wB $UI_optrowh [
                        if (=s $UI_aspectratio "custom") [
                           UI_findratio
                           if (=s $UI_aspectratio "custom") [
                              UI_aspectratio = "16:10"
                              UI_resolution = (at $[UI_ratio@UI_aspectratio] 1)
                              screenw (at $UI_resolution 0)
                              screenh (at $UI_resolution 1)
                           ]
                        ] [
                           UI_aspectratio = "custom"
                        ]
                     ] -1
                     if (=s $UI_aspectratio "custom") [
                        uihlist 0.009 [
                           uifield screenw 5 [] 0.65 style_generic_focus
                           uitext "x" 0.6
                           uifield screenh 5 [] 0.65 style_generic_focus
                           UIbutton "" [uitext "Native" 0.6] 0.1 $UI_optrowh [
                              UI_resolution = (concat $desktopw $desktoph)
                              UI_findratio
                              screenw (at $UI_resolution 0)
                              screenh (at $UI_resolution 1)
                           ]
                        ]
                     ] [
                        UIlistslider UI_resolution = (
                           looplistconcat i $[UI_ratio@UI_aspectratio] [
                              result (concat (escape $i) (strreplace $i " " "x"))
                           ]
                        ) 0.3 $UI_optrowh [
                            screenw (at $UI_resolution 0)
                            screenh (at $UI_resolution 1)
                        ]
                     ]
                     uialign* -1 0
                  ]
                  UI_optbar//----------------------------------------------------------------------
               ] 5 [//Audio////////////////////////////////////////////////////////////////////////
                  UI_optbar//----------------------------------------------------------------------
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $sound 0.016
                        uitext "Enable Audio" 0.6
                     ] $UI_optc1wB $UI_optrowh [sound (! $sound)] -1
                     uialign* -1 0
                  ]
                  UI_optbar//----------------------------------------------------------------------
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext (concatword (? (! $sound) "^f4") "Sound Volume") 0.6]
                     uihlist 0 [
                        UIhslider soundvol 0 255 5 0.3 $UI_optrowh [uitext $soundvol 0.6]
                        uifield soundvol 3 [] 0.65 style_generic_focus
                     ]
                     uialign* -1 0
                  ]
                  uitablerow [
                     uihlist 0.01 [uifill $UI_optc1wA ; uitext (concatword (? (! $sound) "^f4") "Music Volume") 0.6]
                     uihlist 0 [
                        UIhslider musicvol 0 255 5 0.3 $UI_optrowh [uitext $musicvol 0.6]
                        uifield musicvol 3 [] 0.65 style_generic_focus
                     ]
                     uialign* -1 0
                  ]
                  UI_optbar//----------------------------------------------------------------------
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $hitsound 0.016
                        uitext (concatword (? (! $sound) "^f4") "Hit Confirmation") 0.6
                     ] $UI_optc1wB $UI_optrowh [hitsound (! $hitsound)] -1
                     uialign* -1 0
                  ]
                  UI_optbar//----------------------------------------------------------------------
                  uitablerow [
                     UIbutton "hold2" [
                        UIcheckbox $mumble 0.016
                        uitext "Mumble Positional Audio" 0.6
                     ] $UI_optc1wB $UI_optrowh [mumble (! $mumble)] -1
                     uialign* -1 0
                  ]
                  UI_optbar//----------------------------------------------------------------------
               ]
            ]
         ]
      ]
      UIvscroll 0.02 0.6 1.421 0.5
   ]
] [if (pendingchanges) [showui "changes"]]
   
   
   
   
   
   
   
   
   
   
   
   
   
               ]
            ]
         ]
      ]
      UIvscroll 0.02 0.6 1.421 0.5
   ]
] [
   UI_aspectratio = "custom"
   UI_resolution  = (concat $screenw $screenh)
   UI_findratio
] [if (pendingchanges) [showui "changes"]] [] "MENU PRINCIPAL"

	  
	  
	  
	  
	  
	  
	  
	  
	  
	  
	  
	  
	  
	  
      if (! $mainmenu) [
         uifill 0.02 0.24 [UIbar 0 1]
         uivlist 0 [
            if (isspectator $getclientnum) [
               if $scoreboardmultiplayer [
                  if (ismaster $getclientnum) [
                     UIbutton "hold2" [uitext "Play" 0.65] 0.2 0.04 [hideui "main" ; spectator 0]
                  ] [
                     if (> $getmastermode 1) [
                        uifill 0 0.04 [uitext "^f4Play" 0.65]
                     ] [
                        UIbutton "hold2" [uitext "Play" 0.65] 0.2 0.04 [hideui "main" ; spectator 0]
                     ]
                  ]
               ] [
                  UIbutton "hold2" [uitext "Play" 0.65] 0.2 0.04 [hideui "main" ; spectator 0]
               ]
            ] [
               UIbutton "hold2" [uitext "Spectate" 0.65] 0.2 0.04 [hideui "main" ; spectator 1]
            ]
            case $getteam [
               0] [uifill 0 0.04] [
               1] [UIbutton "hold2" [uitext "Join ^f3Rojo" 0.65] 0.2 0.04 [team rojo]] [
               2] [UIbutton "hold2" [uitext "Join ^f1Azul" 0.65] 0.2 0.04 [team azul]]
            uifill 0.2 0.02 [UIbar 1]
            if $scoreboardmultiplayer [
               UIbutton "hold2" [uitext "Master" 0.65] 0.2 0.04 [hideui "main" ; showui "master"]
               if (ismaster $getclientnum) [
                  UIbutton "hold2" [uitext "Bots" 0.65] 0.2 0.04 [hideui "main" ; showui "bots"]
               ] [
                  uifill 0 0.04
               ]
            ] [
               uifill 0 0.04
               UIbutton "hold2" [uitext "Bots" 0.65] 0.2 0.04 [hideui "main" ; showui "bots"]
            ]
            uifill 0.2 0.02 [UIbar 1]
            UIbutton "hold2" [uitext "Disconnect" 0.65] 0.2 0.04 [disconnect]
         ]
      ]
   ]

]

///////////////////////////////////////////////////////////////////////////////
//  Player Setup                                                             //
///////////////////////////////////////////////////////////////////////////////
UI_pmodel  = 0
UI_pteam   = 0
UI_pweapon = 1

UImenu "player_setup" [
   uihlist 0.01 [
      uivlist 0 [
         uiplayerpreview $UI_pmodel (case $UI_pteam 0 $playercolor 1 $playercolorazul 2 $playercolorrojo) $UI_pteam $UI_pweapon 0.4 0.5 [
            style_generic_default
            uiclamp* 1 1 1 1
         ]
         uihlist 0 [
            uiclamp 1 1
            UIbutton "" [
               UIradio [= $UI_pweapon 0] 0.016
               uitext "Railgun" 0.6
            ] 0 0.032 [UI_pweapon = 0] -1
            UIbutton "" [
               UIradio [= $UI_pweapon 1] 0.016
               uitext "Pulse Rifle" 0.6
            ] 0 0.032 [UI_pweapon = 1] -1
            uiclamp* 1 1
         ]
      ]
      uivlist 0.01 [
         uialign -2 -1
         uivlist 0.0037 [
            uitext "Name" 0.7
            uifield name 15 [] 0.7 [uioutline (uifocus? $c_focus $c_line); uiclamp- 1 1 1 1]
         ]
         looplist3 v t l [
            "playercolor"     0 9
            "playercolorazul" 1 4
            "playercolorrojo" 2 4
         ] [
            uivlist 0.0037 [
               case $t 1 [
                  uitext "^f8Azul" 0.7
               ] 2 [
                  uitext "^f3Rojo" 0.7
               ] () [uitext "Solo" 0.7]
               uigrid (? (< $t 1) 3 2) 0.005 0.005 [
                  local color
                  uihover [UI_pteam = $t]
                  loop i $l [
                     color = (getplayercolor $i $t)
                     uicolor $color 0.0458 0.0458 [
                        uioutline (? (= $$v $i) $c_fill $color)
                        uiclamp- 1 1 1 1
                        uipress [$v $i]
                     ]
                  ]
               ]
            ]
         ]
      ]
   ]
] [] [] [] "Player Setup"

///////////////////////////////////////////////////////////////////////////////
//  Credits                                                                  //
///////////////////////////////////////////////////////////////////////////////
UI_creditlist = [
   UItitle [
      uispace 0.015 0 [
         uialign -1 -2
         uihlist 0.01 [
            uiimage "media/interface/cube.png" 0.03 0.03
            uitext [@@@@arg1] 0.7
         ]
      ]
   ] 0 0.032
   uispace 0.03 0 [
      uifill 0 0 [
         uiclamp 1 1
         uimodhgradient 0xC0C0C0 0xFFFFFF
         uiclamp- 1 1 1 1
         uispace 0.02 0.01 [
            uialign -1 -2
            uivlist 0 [
               looplist i $arg2 [
                  uiwraptext (strreplace (strreplace $i "^"" "^fs^f8^"" "^"^fr") ": " "^f4: ") 0.69 0.6
               ]
               uialign* -1 -2
            ]
         ]
      ]
   ]
   uifill 0 0.02
]

UImenu "credits" [
   uihlist 0.01 [
      uiscroll 0.8 0.8 [
         uifill 0.77
         uivlist 0.0008 [
            uiclamp 1 1
            uialign -2 -1
            // Alphabetized by alias
            UI_creditlist "Project" [
               [Lee "eihrul" Salzman : Code Gatekeeper]
               [Shane "Nieb" Nieb : Media Gatekeeper]
            ]
            UI_creditlist "Code" [
               [Lee "eihrul" Salzman]
               [Benjamin Segovia]
               [Kevin "Hirato Kirata" Meyer]
            ]
            UI_creditlist "Art" [
               [Shane "Nieb" Nieb : Playermodel, Mapmodels, Textures]
            ]
            UI_creditlist "Sound" [
               [Dylan "Dacker" Ackerly]
               [Shane "Nieb" Nieb]
               [Sławomir "Q009" Błauciak]
               [Jannic "Uphys" Böhme]
            ]
            UI_creditlist "Cartography" [
               [Dylan "Dacker" Ackerly : complex]
               [Shane "Nieb" Nieb : complex, test_ctf]
               [Sławomir "Q009" Błauciak : steelribs]
            ]
            UI_creditlist "Miscellaneous" [
               [Kevin "Hirato Kirata" Meyer : CubeScript Documentation]
               [Shane "Nieb" Nieb : UI Design, Tesseract Website]
               [Daniel "q66" Kolesa : Build-system Improvements]
               ["RaZgRiZ" : UI Documentation, UI Design]
            ]
            UI_creditlist "Cube Engine 2" [
               [Wouter "Aardappel" van Oortmerssen]
               [Lee "eihrul" Salzman]
               [Mike "Gilt" Dysart]
               [Robert "baby-rabbit" Pointon]
               [Quinton "Quin" Reeves]
               [John "geartrooper" Siar]
               [and others...]
               "http://sauerbraten.org/"
            ]
            uiclamp* 1 1
         ]
      ]
      UIvscroll 0.02 0.8 2.0
   ]
] [] [] [] "Tesseract Contributors"

///////////////////////////////////////////////////////////////////////////////
//  Master                                                                   //
///////////////////////////////////////////////////////////////////////////////
menu_master = [if $isconnected [if $scoreboardmultiplayer [toggleui "master"]]]

UImenu "master" [
   uifill 0 0 [
      uivlist 0 [
         uihlist 0.01 [
            if (ismaster $getclientnum) [
               UIbutton "" [uitext "Relinquish Master" 0.65] 0.24 0.06 [setmaster 0]
            ] [
               if (issomeoneelsemaster) [
                  UIbutton "" [uitext "^f4Claim Master" 0.65] 0.24 0.06 []
               ] [
                  UIbutton "" [uitext "Claim Master" 0.65] 0.24 0.06 [setmaster 1]
               ]
            ]
            if (ismaster $getclientnum) [
               uigrid 2 0 0 [
                  looplist2 n i [
                     "^f0open ^f4(0)"   0 "^f0veto ^f4(1)"    1
                     "^f2locked ^f4(2)" 2 "^f3private ^f4(3)" 3
                  ] [
                     UIbutton "" [
                        UIradio [= $getmastermode $i] 0.016
                        uitext $n 0.6
                     ] 0.16 0.03 [mastermode $i] -1
                  ]
               ]
               uivlist 0 [
                  UIbutton "" [uitext "Clearbans" 0.65] 0.16 0.03 [clearbans]
                  UIbutton "" [uitext "Bots" 0.65] 0.16 0.03 [hideui "main" ; showui "bots"]
               ]
            ] [
               uifill 0.49
            ]
         ]
         uifill 0 0.02 [UIbar 1 ; uiclamp 1 1 1 1]
         if (ismaster $getclientnum) [
            if (> $getmode 2) [UI_clientlistteam] [UI_clientlistsolo]
         ] [
            if (> $getmode 2) [uifill 1.43 0.312] [uifill 0 0.624]
         ]
      ]
   ]
] [] [] [] "Master"

UI_clientlistsolo = [
   uihlist 0 [
      uiscroll 0.71 0.624 [
         uifill 0.71 0.624 [
            uitable 0 0 [
               UI_mlc = 0
               looplist cn (listclients 1 0) [
                  uitablerow [
                     uifill 0.078 0.026 [
                        uicolortext (concatword $cn " : ") (scoreboardstatus $cn) 0.57
                        uialign- 1
                     ]
                     uifill 0.362 0.026 [
                        uicolortext (getclientcolorname $cn) (scoreboardstatus $cn) 0.57
                        uialign- -1
                     ]
                     if (= $cn $getclientnum)[
                        uifill 0.077 0.026
                     ] [
                        UIbutton "hold2" [
                           UItriangle 0xCCCCCC 0.01 0.01 270
                           uitext "Kick" 0.57
                        ] 0.077 0.026 [kick @cn] -1
                     ]
                     UIbutton "hold2" [
                        UIradio [= (isspectator $cn) 1] 0.016
                        uitext "Spec" 0.57
                     ] 0.087 0.026 [spectator @(= (isspectator $cn) 0) @cn] -1
                     UIbutton "hold2" [
                        UIradio [= (ismaster $cn) 1] 0.016
                        uitext (concatword (? (isadmin $cn) "Admin" (? (isauth $cn) "Auth" "Master"))) 0.57
                     ] 0.105 0.026 [setmaster (? (ismaster $cn) 0 1) @cn] -1
                  ] [
                     UI_mlc = (! $UI_mlc)
                     uicolor (? $UI_mlc 0x99323232 0x99262626) 0 0 [
                        uiclamp 1 1 1 1
                        pushif highlight (scoreboardhighlight $cn) [
                           uioutline 0xA0A0A0 ; uiclamp- 1 1 1 1
                        ]
                     ]
                  ]
               ]
            ]
            uialign* -1 -1
         ]
      ]
      uifill 0.01
      UIvscroll 0.02 0.624 1.56
   ]
]

UI_clientlistteam = [
   uihlist 0 [
      uiscroll 1.4 0.312 [
         uifill 1.4 0.312 [
            uihlist 0 [
               uialign 0 -1
               uitable 0 0 [
                  uifill 0.695
                  UI_mlc = 0
                  looplist cn (listclients 1 0) [
                     if (= (getclientteam $cn) 1) [
                        uitablerow [
                           uifill 0.078 0.026 [
                              uicolortext (concatword $cn " : ") (scoreboardstatus $cn) 0.57
                              uialign- 1
                           ]
                           uifill 0.26 0.026 [
                              uicolortext (getclientcolorname $cn) (scoreboardstatus $cn) 0.57
                              uialign- -1
                           ]
                           if (= $cn $getclientnum)[
                              uifill 0.077 0.026
                           ] [
                              UIbutton "hold2" [
                                 UItriangle 0xCCCCCC 0.01 0.01 270
                                 uitext "Kick" 0.57
                              ] 0.077 0.026 [kick @cn] -1
                           ]
                           UIbutton "hold2" [
                              UItriangle 0xCCCCCC 0.01 0.01 270
                              uitext "Team" 0.57
                           ] 0.0875 0.026 [setteam @cn @(? (=s (getclientteam $cn) "1") "2" "1")] -1
                           UIbutton "hold2" [
                              UIradio [= (isspectator $cn) 1] 0.016
                              uitext "Spec" 0.57
                           ] 0.087 0.026 [spectator @(= (isspectator $cn) 0) @cn] -1
                           UIbutton "hold2" [
                              UIradio [= (ismaster $cn) 1] 0.016
                              uitext (concatword (? (isadmin $cn) "Admin" (? (isauth $cn) "Auth" "Master"))) 0.57
                           ] 0.105 0.026 [setmaster (? (ismaster $cn) 0 1) @cn] -1
                        ] [
                           UI_mlc = (! $UI_mlc)
                           uicolor (? $UI_mlc 0x99333b40 0x99262b33) 0 0 [
                              uiclamp 1 1 1 1
                              pushif highlight (scoreboardhighlight $cn) [
                                 uioutline 0xA0A0A0 ; uiclamp- 1 1 1 1
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               uifill 0.01
               uitable 0 0 [
                  uifill 0.695
                  UI_mlc = 0
                  looplist cn (listclients 1 0) [
                     if (= (getclientteam $cn) 2) [
                        uitablerow [
                           uifill 0.078 0.026 [
                              uicolortext (concatword $cn " : ") (scoreboardstatus $cn) 0.57
                              uialign- 1
                           ]
                           uifill 0.26 0.026 [
                              uicolortext (getclientcolorname $cn) (scoreboardstatus $cn) 0.57
                              uialign- -1
                           ]
                           if (= $cn $getclientnum)[
                              uifill 0.077 0.026
                           ] [
                              UIbutton "hold2" [
                                 UItriangle 0 0.01 0.01 270
                                 uitext "Kick" 0.57
                              ] 0.077 0.026 [kick @cn] -1
                           ]
                           UIbutton "hold2" [
                              UItriangle 0 0.01 0.01 270
                              uitext "Team" 0.57
                           ] 0.0875 0.026 [setteam @cn @(? (=s (getclientteam $cn) "1") "2" "1")] -1
                           UIbutton "hold2" [
                              UIradio [= (isspectator $cn) 1] 0.016
                              uitext "Spec" 0.57
                           ] 0.087 0.026 [spectator @(= (isspectator $cn) 0) @cn] -1
                           UIbutton "hold2" [
                              UIradio [= (ismaster $cn) 1] 0.016
                              uitext (concatword (? (isadmin $cn) "Admin" (? (isauth $cn) "Auth" "Master"))) 0.57
                           ] 0.105 0.026 [setmaster (? (ismaster $cn) 0 1) @cn] -1
                        ] [
                           UI_mlc = (! $UI_mlc)
                           uicolor (? $UI_mlc 0x99403333 0x99332626) 0 0 [
                              uiclamp 1 1 1 1
                              pushif highlight (scoreboardhighlight $cn) [
                                 uioutline 0xA0A0A0 ; uiclamp- 1 1 1 1
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               uialign* 0 -1
            ]
         ]
      ]
      uifill 0.01
      UIvscroll 0.02 0.312 1.56
   ]
]

///////////////////////////////////////////////////////////////////////////////
//  Bots                                                                     //
///////////////////////////////////////////////////////////////////////////////
UI_botskill = 87
UI_botaddnum = 9

UImenu "bots" [
   uifill 0.65 0.27 [
      uivlist 0.01 [
         uitext (concatword "Bots: " (numbots)) 0.6
         uifill 0 0.01
         uihlist 0.01 [
            uialign 1 ; uitext "Skill Level" 0.6 ; UIhslider UI_botskill 1 100 1 0.5 0.032 [uitext $UI_botskill 0.6]
         ]
         uihlist 0.01 [
            uialign 1 ; uitext "#" 0.6 ; UIhslider UI_botaddnum 2 32 1 0.5 0.032 [uitext $UI_botaddnum 0.6]
         ]
         uifill 0 0.015
         uihlist 0.05 [
            uivlist 0.01 [
               UIbutton "" [uitext "Add Bot" 0.65 ; UI_keyref 1 0.027 0.027 "Ins" "" 0.4] 0.2 0.04 [addbot $UI_botskill]
               UIbutton "" [uitext (concatword "Add " $UI_botaddnum " Bots") 0.65] 0.2 0.04 [loop a (UI_botaddnum) [addbot $UI_botskill]]
            ]
            uivlist 0.01 [
               UIbutton "" [uitext "Delete Bot" 0.65 ; UI_keyref 1 0.027 0.027 "Del" "" 0.4] 0.2 0.04 [delbot]
               UIbutton "" [uitext "Clear Bots" 0.65] 0.2 0.04 [clearbots]
            ]
         ]
      ]
   ]
] [] [] [] "Bots"

///////////////////////////////////////////////////////////////////////////////
//  Display Changes                                                          //
///////////////////////////////////////////////////////////////////////////////
UImenu "changes" [
   uivlist 0.02 [
      uiclamp 1 1
      UItitle [uitext "Apply changes for:" 0.6] 0 0.03
      uiclamp- 1 1
      uivlist 0.01 [
         loop i $pendingchanges [
            uitext (concatword "^f8" (pendingchanges $i)) 0.6
         ]
      ]
      uihlist 0 [
         UIbutton "hold2" [uitext "Yes" 0.6] 0.18 0.032 [applychanges]
         UIbutton "hold2" [uitext "No"  0.6] 0.18 0.032 [hideui "changes"]
      ]
   ]
] [if (= $pendingchanges 0) [hideui "changes"]]


///////////////////////////////////////////////////////////////////////////////
//  Notepad                                                                  //
///////////////////////////////////////////////////////////////////////////////
UI_notepadfile = "untitled.txt"
UI_cmc_from   = ""
UI_cmc_to     = ""

UImenu "notepad" [
   uivlist 0.01 [
      uihlist 0.01 [
         uialign -1 -2
         uifield UI_notepadfile -35 [] 0.6 [
            uioutline (uifocus? 0xFF0000 $c_line)
            uiclamp- 1 1 1 1
         ]
         UIbutton "hold2" [uitext "Load"       0.6] 0.04 0.032 [textfocus $UI_notepadfile ; textload $UI_notepadfile]
         UIbutton "hold2" [uitext "Save"       0.6] 0.04 0.032 [textfocus $UI_notepadfile ; textsave $UI_notepadfile]
         UIbutton "hold2" [uitext "Exec"       0.6] 0.04 0.032 [textfocus $UI_notepadfile ; textexec]
         uispace 0.01 0 [UIbar 0 1]
         UIbutton "hold2" [uitext "Copy"       0.6] 0.04 0.032 [textfocus $UI_notepadfile ; textcopy]
         UIbutton "hold2" [uitext "Paste"      0.6] 0.04 0.032 [textfocus $UI_notepadfile ; textpaste]
         UIbutton "hold2" [uitext "Select All" 0.6] 0.04 0.032 [textfocus $UI_notepadfile ; textselectall]
         uispace 0.01 0 [UIbar 0 1]
         UIbutton "hold2" [uitext "Clear All"  0.6] 0.04 0.032 [textfocus $UI_notepadfile ; textclear]
      ]
      uitexteditor $UI_notepadfile -80 20 1 "" 0 [
         uioutline (uifocus? 0xFF0000 $c_line)
         uiclamp- 1 1 1 1
      ]
      textinit $UI_notepadfile $UI_notepadfile
   ]
] [] [] [] "Notepad"

notepad = [
   if $numargs [UI_notepadfile = $arg1]
   showui "notepad"
]

mapnotepad = [
   UI_notepadfile = (concatword "media/map/" (? $numargs $arg1 $mapname) ".cfg")
   showui "notepad"
]

copymapcfg = [
   if $numargs [
      UI_cmc_from = $arg1
      UI_cmc_to   = (? (= $numargs 2) $arg2 $mapname)
      if (findfile (concatword "media/map/" $UI_cmc_from ".cfg")) [
         if (findfile (concatword "media/map/" $UI_cmc_to ".cfg")) [showui "cmc_confirm"] [
            textfocus "#copymapcfg"
            textload (concatword "media/map/" $UI_cmc_from ".cfg")
            textsave (concatword "media/map/" $UI_cmc_to   ".cfg")
         ]
      ] [
         echo (concatword "^f7Map config "^f8^" $UI_cmc_from "^f7^" does not exist!")
         UI_cmc_from = "" ; UI_cmc_to = ""
      ]
   ]
]

UImenu "cmc_confirm" [
   uivlist 0.02 [
      uiclamp 1 1
      UItitle [uitext "Copy map config:" 0.6] 0 0.03
      uiclamp- 1 1
      uivlist 0.01 [
         uitext (concatword "^f2" $UI_cmc_from) 0.6
         UItriangle 0 0.01 0.01 180
         uitext (concatword "^f2" $UI_cmc_to) 0.6
      ]
      uihlist 0 [
         UIbutton "hold2" [uitext "Proceed" 0.6] 0.18 0.032 [
            textfocus "#copymapcfg"
            textload (concatword "media/map/" $UI_cmc_from ".cfg")
            textsave (concatword "media/map/" $UI_cmc_to   ".cfg")
            hideui "cmc_confirm"
         ]
         UIbutton "hold2" [uitext "Cancel"  0.6] 0.18 0.032 [hideui "cmc_confirm"]
      ]
   ]
] [
   if (|| [=s $UI_cmc_from ""] [=s $UI_cmc_to ""]) [hideui "cmc_confirm"]
] [UI_cmc_from = "" ; UI_cmc_to = ""]


///////////////////////////////////////////////////////////////////////////////
//  Edit HUD Elements                                                        //
///////////////////////////////////////////////////////////////////////////////
edittoggled = [
   if $editing [
      showui "editstats"
      showui "edithelp"
   ] [
      hideallui
   ]
]

///////////////////////////////////////////////////////////////////////////////
//  editstats				                                                 //
///////////////////////////////////////////////////////////////////////////////
newui "editstats" [
   uiallowinput 0
   if (! $hidehud) [
      uialign -1 1
      uiabovehud
      uicolor $c_menu_a 0 0 [
         uispace $UIwindow_padding $UIwindow_padding [
            uivlist 0 [
               uicontext (
                  format "%4^f7%5^f7gridsize :^f8 %1 ^f7| worldsize :^f8 %2 ^f7| floatspeed :^f8 %3" $gridpower $mapscale $floatspeed (
                     if $hmapedit [format "heightmap brush^f8 %1 ^f7:^f8 %2^n" $hbrushindex $hbrushname] [
                        if $blendpaintmode [
                           format "blendpaint mode : ^f8%1^f7^nblend brush : ^f8%2^n" (at $blendpaintmodes $blendpaintmode) (getblendbrushname (curblendbrush))
                        ] [if (! (enthavesel)) [
                           format "index^f8 %1 ^f7:^f8 %2^n" (max 0 (getseltex)) (gettexname (getseltex))
                        ]]
                     ]
                  ) (if (enthavesel) [concat (entget) ":^f8" (enthavesel) "^f7selected^n"])
               )
               uicontext (format "cube %1%2" $selchildcount (if $showmat [selchildmat ": "]))
               uihlist 0 [
                  uicontextfill 12 0 [uicontext (format "wtr:%1k(%2%%)" $editstatwtr $editstatvtr)    ; uialign- -1 0]
                  uicontextfill 12 0 [uicontext (format "wvt:%1k(%2%%)" $editstatwvt $editstatvvt)    ; uialign- -1 0]
                  uicontextfill 11 0 [uicontext (format "evt:%1k" $editstatevt)                       ; uialign- -1 0]
                  uicontextfill  7 0 [uicontext (format "eva:%1k" $editstateva)                       ; uialign- -1 0]
               ]
               uihlist 0 [
                  uicontextfill 12 0 [uicontext (concatword "ond:" $editstatocta)                     ; uialign- -1 0]
                  uicontextfill 12 0 [uicontext (concatword "va:" $editstatva)                        ; uialign- -1 0]
                  uicontextfill 11 0 [uicontext (format "gl:%1(%2)" $editstatglde $editstatgeombatch) ; uialign- -1 0]
                  uicontextfill  7 0 [uicontext (concatword "oq:" $editstatoq)                        ; uialign- -1 0]
                  uicontextfill  7 0 [uicontext (concatword "pvs:" $editstatpvs)                      ; uialign- -1 0]
               ]
               uialign* -1 0
            ]
         ]
         uioutline $c_line ; uiclamp- 1 1 1 1
      ]
   ]
]

///////////////////////////////////////////////////////////////////////////////
//  Help				                                                     //
///////////////////////////////////////////////////////////////////////////////

newui "edithelp" [
	uiallowinput 0
	if (! $hidehud) [
		uialign 1 0
		uicolor $c_menu_a 0 0 [
			uivlist 0.005 [
				uispace 0.0025
				UI_Edit_Help $Map_Editor_Help_Exit 			"F1"	2
				UI_Edit_Help $Map_Editor_Help_AddEntity 	"F2"	2
				UI_Edit_Help $Map_Editor_Help_AddTexture 	"F3"	2
				UI_Edit_Help $Map_Editor_Help_AddModel 		"F4"	2
				UI_Edit_Help $Map_Editor_Help_EditMaterials "F5"	2
				UI_Edit_Help $Map_Editor_Help_SaveMap 		"F6"	2
				UI_Edit_Help $Map_Editor_Help_MapAtmosphere "F7"	2
				UI_Edit_Help $Map_Editor_Help_ViewKeyMap 	"F10"	2
				
				uicolor 0x777777 0.22 0 [
					uihlist	0 [
						uispace 0.005
						uitext (gettext $Map_Editor_Help_EditModes) 0.55
					]
				]
				
				UI_Edit_Help $Map_Editor_Help_AllFaces 		"6"		$allfaces
				UI_Edit_Help $Map_Editor_Help_EntSelSnap 	"7"		$entselsnap
				UI_Edit_Help $Map_Editor_Help_EntEditing 	"8"		$entediting
				UI_Edit_Help $Map_Editor_Help_FullBright 	"L"		$fullbright
				UI_Edit_Help $Map_Editor_Help_ShowMaterials "M"		$showmat
				uispace 0.0025
			]
		]
	]
]

///////////////////////////////////////////////////////////////////////////////
//  F2 Entities          			                                         //
///////////////////////////////////////////////////////////////////////////////

UI_enttype = ""

showEnvEnts = [
	uihlist 0 [
		uivlist 0.005 [
			uitext (gettext $Map_Editor_EntInfo_Lighting) 0.6
			UIbutton "" [uitext (gettext $Map_Editor_EnvBtn_Light) 0.6]    		0.3 0.03 [hideui "addentity" ; newent light 64 128 128 128 0 ; selentedit]     -1 [uihover [UI_enttype = "light ^f4*"]]
			UIbutton "" [uitext (gettext $Map_Editor_EnvBtn_Spotlight) 0.6] 	0.3 0.03 [hideui "addentity" ; showui "ent_spotlight"] 		-1 [uihover [UI_enttype = "spotlight ^f4*"]]
			uitext (gettext $Map_Editor_EntInfo_Reflections) 0.6
			UIbutton "" [uitext (gettext $Map_Editor_EnvBtn_Envmap) 0.6]    	0.3 0.03 [hideui "addentity" ; newent envmap] 					-1 [uihover [UI_enttype = "envmap"]]
			uitext (gettext $Map_Editor_EntInfo_Decorations) 0.6
			UIbutton "" [uitext (gettext $Map_Editor_EnvBtn_Mapmodel) 0.6]  	0.3 0.03 [hideui "addentity" ; showui "mapmodel"]     			-1 [uihover [UI_enttype = "mapmodel ^f4*"]]
			UIbutton "" [uitext (gettext $Map_Editor_EnvBtn_Particles) 0.6] 	0.3 0.03 [hideui "addentity" ; newent ent_particles] 		    -1 [uihover [UI_enttype = "particles ^f4*"]]
			UIbutton "" [uitext (gettext $Map_Editor_EnvBtn_Decal) 0.6] 		0.3 0.03 [hideui "addentity" ; newent decal] 					-1 [uihover [UI_enttype = "decal ^f4*"]]
			uitext (gettext $Map_Editor_EntInfo_Audio) 0.6
			UIbutton "" [uitext (gettext $Map_Editor_EnvBtn_Sound) 0.6] 		0.3 0.03 [hideui "addentity" ; newent sound] 					-1 [uihover [UI_enttype = "sound ^f4*"]]
		]
	]	
]

showItemEnts = [
	uihlist 0 [
		uivlist 0.005 [
			uitext (gettext $Map_Editor_EntInfo_Items)  0.6
			UIbutton "" [uitext (gettext $Item_Health) 0.55]    		0.22 0.03 [hideui "addentity" ; newent health] 			-1 [uihover [UI_enttype = "health"]]
			UIbutton "" [uitext (gettext $Item_GrilledPig) 0.55]    	0.22 0.03 [hideui "addentity" ; newent healthboost] 	-1 [uihover [UI_enttype = "healthboost"]]
			UIbutton "" [uitext (gettext $Item_Mana) 0.55] 				0.22 0.03 [hideui "addentity" ; newent mana] 			-1 [uihover [UI_enttype = "mana"]]
			uitext (gettext $Map_Editor_EntInfo_Shields)  0.6
			UIbutton "" [uitext (gettext $Item_WoodShield) 0.55]    	0.22 0.03 [hideui "addentity" ; newent woodshield] 		-1 [uihover [UI_enttype = "woodshield"]]
			UIbutton "" [uitext (gettext $Item_IronShield) 0.55]   		0.22 0.03 [hideui "addentity" ; newent ironshield] 		-1 [uihover [UI_enttype = "ironshield"]]
			UIbutton "" [uitext (gettext $Item_GoldShield) 0.55] 		0.22 0.03 [hideui "addentity" ; newent goldshield] 		-1 [uihover [UI_enttype = "goldshield"]]
			UIbutton "" [uitext (gettext $Item_MagnetShield) 0.55]		0.22 0.03 [hideui "addentity" ; newent magnetshield] 	-1 [uihover [UI_enttype = "magnetshield"]]
			UIbutton "" [uitext (gettext $Item_PowerArmor) 0.55]    	0.22 0.03 [hideui "addentity" ; newent powerarmor] 		-1 [uihover [UI_enttype = "powerarmor"]]
			uitext (gettext $Map_Editor_EntInfo_Boosts)  0.6
			UIbutton "" [uitext (gettext $Item_Roids) 0.55]    			0.22 0.03 [hideui "addentity" ; newent roids] 			-1 [uihover [UI_enttype = "roids"]]
			UIbutton "" [uitext (gettext $Item_Shrooms) 0.55]   		0.22 0.03 [hideui "addentity" ; newent shrooms] 		-1 [uihover [UI_enttype = "shrooms"]]
			UIbutton "" [uitext (gettext $Item_Epo) 0.55] 				0.22 0.03 [hideui "addentity" ; newent epo] 			-1 [uihover [UI_enttype = "epo"]]
			UIbutton "" [uitext (gettext $Item_Joint) 0.55] 			0.22 0.03 [hideui "addentity" ; newent joint] 			-1 [uihover [UI_enttype = "joint"]]
		]
				
		uispace 0.01
				
		uivlist 0.005 [
			uitext (gettext $Map_Editor_EntInfo_Weapons)  0.6
			UIbutton "" [uitext (gettext $Weapon_ElectricRifle) 0.55]  	0.22 0.03 [hideui "addentity" ; newent electricrifle] 	-1 [uihover [UI_enttype = "electricrifle"]]
			UIbutton "" [uitext (gettext $Weapon_PlasmaRifle) 0.55] 	0.22 0.03 [hideui "addentity" ; newent plasmarifle] 	-1 [uihover [UI_enttype = "plasmarifle"]]
			UIbutton "" [uitext (gettext $Weapon_Smaw) 0.55]    		0.22 0.03 [hideui "addentity" ; newent smaw] 			-1 [uihover [UI_enttype = "smaw"]]
			UIbutton "" [uitext (gettext $Weapon_Minigun) 0.55]   		0.22 0.03 [hideui "addentity" ; newent minigun] 		-1 [uihover [UI_enttype = "minigun"]]
			UIbutton "" [uitext (gettext $Weapon_Spockgun) 0.55] 		0.22 0.03 [hideui "addentity" ; newent spockgun] 		-1 [uihover [UI_enttype = "spockgun"]]
			UIbutton "" [uitext (gettext $Weapon_M32) 0.55]				0.22 0.03 [hideui "addentity" ; newent m32] 			-1 [uihover [UI_enttype = "m32"]]
			UIbutton "" [uitext (gettext $Weapon_Flamethrower) 0.55]   	0.22 0.03 [hideui "addentity" ; newent flamethrower] 	-1 [uihover [UI_enttype = "flamethrower"]]
			UIbutton "" [uitext (gettext $Weapon_Uzi) 0.55]    			0.22 0.03 [hideui "addentity" ; newent uzi] 			-1 [uihover [UI_enttype = "uzi"]]
			UIbutton "" [uitext (gettext $Weapon_Famas) 0.55]   		0.22 0.03 [hideui "addentity" ; newent famas] 			-1 [uihover [UI_enttype = "famas"]]
			UIbutton "" [uitext (gettext $Weapon_Mossberg500) 0.55] 	0.22 0.03 [hideui "addentity" ; newent mossberg500] 	-1 [uihover [UI_enttype = "mossberg500"]]
			UIbutton "" [uitext (gettext $Weapon_Hydra) 0.55] 			0.22 0.03 [hideui "addentity" ; newent hydra] 			-1 [uihover [UI_enttype = "hydra"]]
			UIbutton "" [uitext (gettext $Weapon_Sv98) 0.55]   			0.22 0.03 [hideui "addentity" ; newent sv98] 			-1 [uihover [UI_enttype = "sv98"]]
			UIbutton "" [uitext (gettext $Weapon_Sks) 0.55]    			0.22 0.03 [hideui "addentity" ; newent sks] 			-1 [uihover [UI_enttype = "sks"]]
			UIbutton "" [uitext (gettext $Weapon_Crossbow) 0.55]   		0.22 0.03 [hideui "addentity" ; newent crossbow] 		-1 [uihover [UI_enttype = "crossbow"]]
			UIbutton "" [uitext (gettext $Weapon_Ak47) 0.55] 			0.22 0.03 [hideui "addentity" ; newent ak47] 			-1 [uihover [UI_enttype = "ak47"]]
			UIbutton "" [uitext (gettext $Weapon_Gapb1) 0.55] 			0.22 0.03 [hideui "addentity" ; newent gapb1] 			-1 [uihover [UI_enttype = "gapb1"]]
			UIbutton "" [uitext (gettext $Weapon_Fireworks) 0.55] 		0.22 0.03 [hideui "addentity" ; newent fireworks] 		-1 [uihover [UI_enttype = "fireworks"]]
			UIbutton "" [uitext (gettext $Weapon_Glock) 0.55] 			0.22 0.03 [hideui "addentity" ; newent glock] 			-1 [uihover [UI_enttype = "glock"]]
			uitext (gettext $Map_Editor_EntInfo_Special)  0.6
			UIbutton "" [uitext (gettext $Weapon_Superweapon) 0.55]    	0.22 0.03 [hideui "addentity" ; newent superweapon] 	-1 [uihover [UI_enttype = "superweapon"]]
		]
	]	
]

showGameEnts = [
	uihlist 0 [
		uivlist 0.005 [
			uitext (gettext $Map_Editor_EntInfo_SinglePlayer) 0.6
			UIbutton "" [uitext "Respawn point" 0.6]        0.22 0.03 [hideui "addentity" ; newent respawnpoint]   			-1 [uihover [UI_enttype = "respawnpoint"]]
			UIbutton "" [uitext "NPC" 0.6]        			0.22 0.03 [hideui "addentity" ; newent npc]   					-1 [uihover [UI_enttype = "npc"]]
			UIbutton "" [uitext "Trigger zone" 0.6]        	0.22 0.03 [hideui "addentity" ; newent trigger]   				-1 [uihover [UI_enttype = "trigger"]]
		]
		
		uispace 0.01
		
		uivlist 0.005 [
			uitext (gettext $Map_Editor_EntInfo_RespawnPoints) 0.6
			UIbutton "" [uitext "Respawn" 0.6]        		0.22 0.03 [hideui "addentity" ; newent playerstart]   			-1 [uihover [UI_enttype = "playerstart"]]
			UIbutton "" [uitext "Respawn ^fdTeam 1" 0.6] 	0.22 0.03 [hideui "addentity" ; newent playerstart 1] 			-1 [uihover [UI_enttype = "playerstart 1"]]
			UIbutton "" [uitext "Respawn ^fcTeam 2" 0.6] 	0.22 0.03 [hideui "addentity" ; newent playerstart 2] 			-1 [uihover [UI_enttype = "playerstart 2"]]
			uitext (gettext $Map_Editor_EntInfo_Movement) 0.6
			UIbutton "" [uitext "Jumppad" 0.6]   			0.22 0.03 [hideui "addentity" ; showui "ent_jumppad"]   		-1 [uihover [UI_enttype = "jumppad ^f4*"]]
			UIbutton "" [uitext "Teleport" 0.6]  			0.22 0.03 [hideui "addentity" ; showui "ent_teleport"]  		-1 [uihover [UI_enttype = "teleport ^f4*"]]
			UIbutton "" [uitext "Teledest" 0.6]  			0.22 0.03 [hideui "addentity" ; showui "ent_teledest"]  		-1 [uihover [UI_enttype = "teledest ^f4*"]]
			uitext (gettext $Map_Editor_EntInfo_CaptureTheFlag) 0.6
			UIbutton "" [uitext "Flag ^fdTeam 1" 0.6]       0.22 0.03 [hideui "addentity" ; newent flag 1]        			-1 [uihover [UI_enttype = "flag 1"]]
			UIbutton "" [uitext "Flag ^fcTeam 2" 0.6]       0.22 0.03 [hideui "addentity" ; newent flag 2]        			-1 [uihover [UI_enttype = "flag 2"]]
			uitext (gettext $Map_Editor_EntInfo_Domination) 0.6
			UIbutton "" [uitext "Base" 0.6]        			0.22 0.03 [hideui "addentity" ; newent base]        			-1 [uihover [UI_enttype = "base"]]
			uitext (gettext $Map_Editor_EntInfo_Miscellaneous) 0.6
			UIbutton "" [uitext "Camera" 0.6]        		0.22 0.03 [hideui "addentity" ; newent camera]        			-1 [uihover [UI_enttype = "camera"]]
		]
	]
]

edit_ent_tab = 0

newui "addentity" [
	uialign -1 -1
	uicolor $c_menu_a 0.522 1 [
		uivlist 0 [
			uifill 0.5 0.032 [
				uitext (concatword "^f7/newent " $UI_enttype) 0.7
				uialign* -1 0
				uioutline $c_line ; uiclamp- 1 1 1 1
			]
			
			uispace 0 0.01
			
			UI_h_tab 0.5 0.05 edit_ent_tab [
				0 @(gettext $Map_Editor_EntTab_Environement) []
				1 @(gettext $Map_Editor_EntTab_GameItems) []
				2 @(gettext $Map_Editor_EntTab_GameMisc) []
			] 1 [["media/interface/hud/pixel.png" "media/interface/hud/flingue.jpg" "media/interface/hud/souris.png"]]
			
			uispace 0 0.01
			
			uifill 0.5 0.75 [
				case $edit_ent_tab 0 [showEnvEnts]
				case $edit_ent_tab 1 [showItemEnts]
				case $edit_ent_tab 2 [showGameEnts]
			]

		]
	]
] [
   hideui "mapmodel"
   hideui "texture_browser"
]

showEditMapModel = [
	editTitle = (gettext $Map_Editor_EditMapModel)
	uihlist 0 [
		uispace 0.005
		uivlist 0.02 [
			uitext (gettext $Map_Editor_EditId) 0.62
			uitext (gettext $Map_Editor_EditYaw) 0.62
			uitext (gettext $Map_Editor_EditPitch) 0.62
			uitext (gettext $Map_Editor_EditRoll) 0.62
			uitext (gettext $Map_Editor_EditSize) 0.62
			uialign* -1
		]
		uispace 0.005
		uivlist 0.02 [
			UIhslider eattr0 0 $nummapmodels 1 0.65 0.02 [uitext ($eattr0) 0.6]
			UIhslider eattr1 0 360 1 0.65 0.02 [uitext ($eattr1) 0.6]
			UIhslider eattr2 0 360 1 0.65 0.02 [uitext ($eattr2) 0.6]
			UIhslider eattr3 0 360 1 0.65 0.02 [uitext ($eattr3) 0.6]
			UIhslider eattr4 1 1000 1 0.65 0.02 [uitext ($eattr4) 0.6]
			uialign 1
		]
		uispace 0.005
	]
]

editTitle = ""
lightTypes = ["Fully dynamic" "No shadows" "No dynamic shadows" "No specular" "Vol. fully dynamic" "Vol. no shadows" "Vol. no dynamic shadows" "Vol. no specular"]

showEditLight = [
	editTitle = (gettext $Map_Editor_EditLight)
	uivlist 0 [
		uihlist 0 [
			uispace 0.005
			uivlist 0.02 [
				uitext (gettext $Map_Editor_EditRadius) 0.62
				uitext (gettext $Map_Editor_EditRed) 0.62
				uitext (gettext $Map_Editor_EditGreen)" 0.62
				uitext (gettext $Map_Editor_EditBlue) 0.62
				uitext (gettext $Map_Editor_EditType) 0.62
				uialign* -1
			]
			
			uispace 0.005
			
			uivlist 0.02 [
				UIhslider eattr0 0 1024 1 0.65 0.02 [uitext ($eattr0) 0.6]
				UIhslider eattr1 0 255 1 0.65 0.02 [uitext ($eattr1) 0.6]
				UIhslider eattr2 0 255 1 0.65 0.02 [uitext ($eattr2) 0.6]
				UIhslider eattr3 0 255 1 0.65 0.02 [uitext ($eattr3) 0.6]
				UIhslider eattr4 0 7 1 0.65 0.02 [uitext (at $lightTypes $eattr4) 0.6]
				uialign 1
			]
			uispace 0.005
		]
	]
]

newui "editent" [
	uiallowinput 1
	uialign 0 1
	uicolor $c_menu_a 0 0 [
		uivlist 0.005 [
			uispace 0.005
			uihgradient 0x6F6F6F $c_menu_a 0.77 0 [
				uihlist 0 [
					uispace 0.005
					uiimage "media/interface/hud/options.jpg" 0.04 0.04
					uispace 0.005
					uitext $editTitle 0.7
				]
				uialign* -1
				
				uihlist 0 [
					uitarget 0.05 0.05 [
						uihover [uicolor 0x999977 0.05 0.035] [uicolor 0xBBBB99 0.05 0.035]
						uiimage "media/interface/hud/checkbox_on.jpg" 0.026 0.026
						uihold [uiimage "media/interface/hud/checkbox_on.jpg" 0.032 0.032] ; uirelease [hideui "editent"]
					]
					uispace 0.005
				]
				uialign- 1
			]
			
			UIbar 1
			if (=s $etype "mapmodel") [showEditMapModel]
			if (=s $etype "light") 	  [showEditLight]
			uispace 0.005
		]
	]
	(entattr 0 $eattr0) ; (entattr 1 $eattr1) ; (entattr 2 $eattr2) ; (entattr 3 $eattr3) ; (entattr 4 $eattr4)
]


///////////////////////////////////////////////////////////////////////////////
//  F3 Texture Browser                                                       //
///////////////////////////////////////////////////////////////////////////////
UI_textabs = 0

newui "texture_browser" [
	uialign -1 -1
	uieschide 0
	uicolor $c_menu_a 0 0 [
		uivlist 0 [
			uihlist 0 [
				UIvscroll 0.02 1 3.0225
				uispace 0.002
				uiscroll 0.5 1 [
					uifill 0.5 1 [
						uigrid 6 0.0038 0.0038 [
							loop slot (numslots) [
								uislotview $slot 0.08 0.08 [
									uihold [uioutline 0xC0C0C0; uiclamp- 1 1 1 1] [uihover [uioutline 0xFFFFFF; uiclamp- 1 1 1 1]]
									uirelease [settex (getslottex $slot)]
								]
							]
						]
						uialign* -1 -1
					]
				]
				uispace 0.002
			]
			//UI_Check_Button $Map_Editor_Button_AllFaces [allfaces (! $allfaces)] $allfaces
		]
	]
] [
   hideui "mapmodel"
   hideui "addentity"
]

///////////////////////////////////////////////////////////////////////////////
//  F4 Mapmodel                                                              //
///////////////////////////////////////////////////////////////////////////////
newui "mapmodel" [
   uialign -1 -1
   uieschide 0
   uicolor $c_menu_a 0 0 [
      uispace $UIwindow_padding $UIwindow_padding [
         uiclamp 1 1 1 1
         uihlist 0.01 [
            if 0 [
               UIvscroll 0.02 1 (*f (min (+ 1 (div $nummapmodels 100)) 10) 5.4)
            ] [
               UIvscroll 0.02 1 (*f (min (+ 1 (div $nummapmodels 50)) 5) 2.7)
            ]
            uiscroll 0.5 1 [
               uivlist 0 [
                  uigrid 4 0 0 [// (+ $_res_wide 1)
                     loop i $nummapmodels [
                        uigroup [
                           uimodelpreview (mapmodelname $i 1) "mapmodel" 0.122 0.122 [
                              uihover [
                                 uihold [uioutline 0xFFFFFF] [
                                    uieschold [uioutline 0xFFFFFF] [
                                       uioutline 0x80FFFFFF
                                    ]
                                 ]
                                 uiclamp* 1 1 1 1
                                 UI_selmdl = $i
                                 uirelease [
                                    newent mapmodel $i
                                    _io_mapmodel = 0
                                 ]
                                 uiescrelease [
                                    if (enthavesel) [
                                       entset "mapmodel" $i
                                       _io_mapmodel = 0
                                    ]
                                 ]
                              ] [
                                 if (= $UI_selmdl $i) [
                                    uioutline 0x40FFFFFF
                                    uiclamp- 1 1 1 1
                                 ]
                              ]
                           ]
                           uispace 0.01 0.006 [
                              uialign -1 -1
                              uicolortext $i 0x80FFFFFF 0.6
                           ]
                        ]
                     ]
                  ]
               ]
            ]
         ]
      ]
      uioutline $c_line ; uiclamp- 1 1 1 1
   ]
   uiclamp* 1 1 1 1
] [
   UI_selmdl = -1
   hideui "texture_browser"
   hideui "addentity"
]
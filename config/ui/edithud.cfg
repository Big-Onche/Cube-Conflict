///////////////////////////////////////////////////////////////////////////////
//  Edit HUD Elements                                                        //
///////////////////////////////////////////////////////////////////////////////
edittoggled = [
   if $editing [
      showui "editstats"
      showui "varicons"
      showui "edithelp"
   ] [
      hideallui
   ]
]

newui "editstats" [
   uiallowinput 0
   if $hidehud [] [
      uialign -1 1
      uiabovehud
      uicolor $c_menu_a 0 0 [
         uispace $UIwindow_padding $UIwindow_padding [
            uivlist 0 [
               uicontext (
                  format "%4^f7%5^f7gridsize :^f8 %1 ^f7| worldsize :^f8 %2 ^f7| floatspeed :^f8 %3" $gridpower $mapscale $floatspeed (
                     if $hmapedit [format "heightmap brush^f8 %1 ^f7:^f8 %2^n" $hbrushindex $hbrushname] [
                        if $blendpaintmode [
                           format "blendpaint mode : ^f8%1^f7^nblend brush : ^f8%2^n" (at $blendpaintmodes $blendpaintmode) (getblendbrushname (curblendbrush))
                        ] [if (! (enthavesel)) [
                           format "index^f8 %1 ^f7:^f8 %2^n" (max 0 (getseltex)) (gettexname (getseltex))
                        ]]
                     ]
                  ) (if (enthavesel) [concat (entget) ":^f8" (enthavesel) "^f7selected^n"])
               )
               uicontext (format "cube %1%2" $selchildcount (if $showmat [selchildmat ": "]))
               uihlist 0 [
                  uicontextfill 12 0 [uicontext (format "wtr:%1k(%2%%)" $editstatwtr $editstatvtr)    ; uialign- -1 0]
                  uicontextfill 12 0 [uicontext (format "wvt:%1k(%2%%)" $editstatwvt $editstatvvt)    ; uialign- -1 0]
                  uicontextfill 11 0 [uicontext (format "evt:%1k" $editstatevt)                       ; uialign- -1 0]
                  uicontextfill  7 0 [uicontext (format "eva:%1k" $editstateva)                       ; uialign- -1 0]
               ]
               uihlist 0 [
                  uicontextfill 12 0 [uicontext (concatword "ond:" $editstatocta)                     ; uialign- -1 0]
                  uicontextfill 12 0 [uicontext (concatword "va:" $editstatva)                        ; uialign- -1 0]
                  uicontextfill 11 0 [uicontext (format "gl:%1(%2)" $editstatglde $editstatgeombatch) ; uialign- -1 0]
                  uicontextfill  7 0 [uicontext (concatword "oq:" $editstatoq)                        ; uialign- -1 0]
                  uicontextfill  7 0 [uicontext (concatword "pvs:" $editstatpvs)                      ; uialign- -1 0]
               ]
               uialign* -1 0
            ]
         ]
         uioutline $c_line ; uiclamp- 1 1 1 1
      ]
   ]
]

newui "varicons" [
   uiallowinput 0
   if $hidehud [] [
      uialign 1 1
      uispace 0.01 0.1 [
         uivlist 0 [
            looplist i (concatword "allfaces entselsnap entediting fullbright showmat " (? $scoreboardmultiplayer "nompedit")) [
               uifont "default_outline" [
                  uialign 1
                  if $$i [
                     uitext (concatword "^f8" $i) 0.7
                  ] [uicolortext $i 0x80FFFFFF 0.7]
               ]
            ]
         ]
      ]
   ]
]

newui "edithelp" [
   uiallowinput 0
   if $hidehud [] [
      uialign 1 -1
      uiabovehud
      uicolor $c_menu_a 0 0 [
         uispace $UIwindow_padding 0 [
            uivlist 0.005 [
				uihlist 0.01 [uitext "Exit edit mode" 0.6 ; UI_keyref 2 0.027 0.027 "F1"]
				uihlist 0.01 [uitext "Add entity" 0.6 ; UI_keyref 2 0.027 0.027 "F2"]
				uihlist 0.01 [uitext "Add texture" 0.6 ; UI_keyref 2 0.027 0.027 "F3"]
				uihlist 0.01 [uitext "Add 3d model" 0.6 ; UI_keyref 2 0.027 0.027 "F4"]
				uihlist 0.01 [uitext "Edit materials" 0.6 ; UI_keyref 2 0.027 0.027 "F5"]
				uihlist 0.01 [uitext "Save map" 0.6 ; UI_keyref 2 0.027 0.027 "F6"]
				uihlist 0.01 [uitext "Select map atmo" 0.6 ; UI_keyref 2 0.027 0.027 "F7"]
				uihlist 0.01 [uitext "Edit key map" 0.6 ; UI_keyref 2 0.027 0.027 "F10"]
            ]
         ]
         uioutline $c_line ; uiclamp- 1 1 1 1
      ]
   ]
]